var Os=Object.defineProperty;var Pr=(e,t)=>()=>(e&&(t=e(e=0)),t);var Us=(e,t)=>{for(var r in t)Os(e,r,{get:t[r],enumerable:!0})};function ft(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return Uint8Array.from(atob(t),r=>r.charCodeAt(0))}var Pc,dt,bc,Ir=Pr(()=>{"use strict";Pc=async e=>{let t=dt("emUgRnVEemN0U1BhUXB3amlxc1h0dm9JQklUbXh5Z2YaSRZeZ2EABH5lZgU=",e),r=Uint8Array.from(atob(t),o=>o.charCodeAt(0));return window.crypto.subtle.importKey("raw",r,{name:"AES-CBC",length:256},!1,["decrypt"])},dt=(e,t)=>{let o=Uint8Array.from(atob(e),n=>n.charCodeAt(0)).map((n,i)=>n^t+i&255);return new TextDecoder().decode(o)},bc=async(e,t)=>{if(e==="")return Promise.resolve({});try{let[r,o]=e.split(":"),n=await Pc(t),i=new Uint8Array(atob(r).split("").map(c=>c.charCodeAt(0))),s=new Uint8Array(atob(o).split("").map(c=>c.charCodeAt(0))),a=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:i},n,s);return JSON.parse(new TextDecoder().decode(a))}catch(r){console.error(r);return}}});var ts,rs,os=Pr(()=>{"use strict";Ir();ts=dt("CQkEExYJBQZVXTkRAA9fDxg8PgYCOkMFKxpDHyJKHggkFhIR8tLQ5s694Q==",92),rs=dt("C2kcJScSGCALAQImCxwZBC4UHCs7PhkrBhFOODcYJTQYHCYN2Mn297T10w==",92)});var ss={};Us(ss,{getConfigFromStorage:()=>Oc});import{importJWK as vc,jwtVerify as Rc}from"jose";var ns,is,Oc,as=Pr(()=>{"use strict";os();Ir();Oc=async()=>{let e=null;if(Gatey.siteSettings.subscriber){let r=await vc({kty:"EC",x:ns,y:is,crv:"P-256"},"ES256"),o=new Date().getFullYear(),n=Math.floor((Date.now()-new Date(o,0,1).getTime())/(1e3*60*60*24*7)),i=await fetch(Gatey.uploadUrl+"lic.jws?t="+Gatey.siteSettings.lastUpdate+"&y="+o+"&w="+n).then(s=>s.ok?s.text():null).catch(()=>null);if(i)try{let s=location.hostname.split(":")[0],{payload:a}=await Rc(i,r,{algorithms:["ES256"]});if(a.domain!==s&&a.secondaryDomain!==s)throw new Error("Invalid domain in JWT");let c=a.key.split(":"),u=ft(c[0]),f=ft(c[1]),d=(await fetch(Gatey.uploadUrl+"config.enc?t="+Gatey.siteSettings.lastUpdate).then(m=>m.ok?m.text():null).catch(()=>null))?.split(":");if(d.length===2){let m=ft(d[0]),A=ft(d[1]),F=await crypto.subtle.importKey("raw",u,{name:"AES-GCM"},!1,["decrypt"]),R=await crypto.subtle.decrypt({name:"AES-GCM",iv:f},F,new Uint8Array([...m,...A]));e=JSON.parse(new TextDecoder().decode(R)),e.subscriptionType=a.subscriptionType}}catch(s){console.error(s.message)}}return e??null};ns=ts;is=rs});var w=class e extends Error{constructor({message:t,name:r,recoverySuggestion:o,underlyingError:n,metadata:i}){if(super(t),this.name=r,this.underlyingError=n,this.recoverySuggestion=o,i){let{extendedRequestId:s,httpStatusCode:a,requestId:c}=i;this.metadata={extendedRequestId:s,httpStatusCode:a,requestId:c}}this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var L;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(L||(L={}));var se=(e,t=w)=>(r,o,n)=>{let{message:i,recoverySuggestion:s}=e[o];if(!r)throw new t({name:o,message:n?`${i} ${n}`:i,recoverySuggestion:s})};var To=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new w({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})};var Po="Logging",br="x-amz-user-agent",bo="NoHubcallbackProvidedException";var N;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(N||(N={}));var vo={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6},h=class e{constructor(t,r=N.WARN){this.name=t,this.level=r,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){let t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...r){let o=this.level;e.LOG_LEVEL&&(o=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);let n=vo[o];if(!(vo[t]>=n))return;let s=console.log.bind(console);t===N.ERROR&&console.error&&(s=console.error.bind(console)),t===N.WARN&&console.warn&&(s=console.warn.bind(console)),e.BIND_ALL_LOG_LEVELS&&(t===N.INFO&&console.info&&(s=console.info.bind(console)),t===N.DEBUG&&console.debug&&(s=console.debug.bind(console)));let a=`[${t}] ${this._ts()} ${this.name}`,c="";if(r.length===1&&typeof r[0]=="string")c=`${a} - ${r[0]}`,s(c);else if(r.length===1)c=`${a} ${r[0]}`,s(a,r[0]);else if(typeof r[0]=="string"){let u=r.slice(1);u.length===1&&(u=u[0]),c=`${a} - ${r[0]} ${u}`,s(`${a} - ${r[0]}`,u)}else c=`${a} ${r}`,s(a,r);for(let u of this._pluggables){let f={message:c,timestamp:Date.now()};u.pushLogs([f])}}log(...t){this._log(N.INFO,...t)}info(...t){this._log(N.INFO,...t)}warn(...t){this._log(N.WARN,...t)}error(...t){this._log(N.ERROR,...t)}debug(...t){this._log(N.DEBUG,...t)}verbose(...t){this._log(N.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===Po&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}};h.LOG_LEVEL=null;h.BIND_ALL_LOG_LEVELS=!1;var $e=()=>typeof window<"u"&&typeof window.document<"u";function Ro(e=3e5){return o=>{let n=2**o*100+100*Math.random();return n>e?!1:n}}function vr(e){return(e.match(/.{2}/g)||[]).map(r=>String.fromCharCode(parseInt(r,16))).join("")}var Rr=e=>{let t;return async(...r)=>t||(t=new Promise((o,n)=>{e(...r).then(i=>{o(i)}).catch(i=>{n(i)}).finally(()=>{t=void 0})}),t)};function ht({expiresAt:e,clockDrift:t,tolerance:r=5e3}){return Date.now()+t+r>e}var Ns=new h("parseAWSExports"),ks={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},Uo=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new w({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:r,aws_appsync_graphqlEndpoint:o,aws_appsync_region:n,aws_bots_config:i,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:u,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:d,aws_cognito_social_providers:m,aws_cognito_username_attributes:A,aws_mandatory_sign_in:F,aws_mobile_analytics_app_id:R,aws_mobile_analytics_app_region:ie,aws_user_files_s3_bucket:Se,aws_user_files_s3_bucket_region:pt,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:lt,aws_user_pools_id:mt,aws_user_pools_web_client_id:Cr,geo:gt,oauth:_r,predictions:Fe,aws_cloud_logic_custom:Io,Notifications:Cs,modelIntrospection:Eo}=e,T={};R&&(T.Analytics={Pinpoint:{appId:R,region:ie}});let{InAppMessaging:xr,Push:Tr}=Cs??{};if(xr?.AWSPinpoint||Tr?.AWSPinpoint){if(xr?.AWSPinpoint){let{appId:E,region:Ae}=xr.AWSPinpoint;T.Notifications={InAppMessaging:{Pinpoint:{appId:E,region:Ae}}}}if(Tr?.AWSPinpoint){let{appId:E,region:Ae}=Tr.AWSPinpoint;T.Notifications={...T.Notifications,PushNotification:{Pinpoint:{appId:E,region:Ae}}}}}if(Array.isArray(i)&&(T.Interactions={LexV1:Object.fromEntries(i.map(E=>[E.name,E]))}),o){let E=ks[r];E||Ns.debug(`Invalid authentication type ${r}. Falling back to IAM.`),T.API={GraphQL:{endpoint:o,apiKey:t,region:n,defaultAuthMode:E??"iam"}},Eo&&(T.API.GraphQL.modelIntrospection=Eo)}let _s=c?{status:c&&c.toLowerCase(),totpEnabled:u?.includes("TOTP")??!1,smsEnabled:u?.includes("SMS")??!1}:void 0,xs=f?{minLength:f.passwordPolicyMinLength,requireLowercase:f.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:f.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:f.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:f.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,Ts=Array.from(new Set([...l??[],...d??[]])).reduce((E,Ae)=>({...E,[Ae.toLowerCase()]:{required:!0}}),{}),wo=A?.includes("EMAIL")??!1,Co=A?.includes("PHONE_NUMBER")??!1;(s||mt)&&(T.Auth={Cognito:{identityPoolId:s,allowGuestAccess:F!=="enable",signUpVerificationMethod:a,userAttributes:Ts,userPoolClientId:Cr,userPoolId:mt,mfa:_s,passwordFormat:xs,loginWith:{username:!(wo||Co),email:wo,phone:Co}}});let Ps=_r?Object.keys(_r).length>0:!1,bs=m?m.length>0:!1;if(T.Auth&&Ps&&(T.Auth.Cognito.loginWith={...T.Auth.Cognito.loginWith,oauth:{...Ms(_r),...bs&&{providers:Ds(m)}}}),Se&&(T.Storage={S3:{bucket:Se,region:pt,dangerouslyConnectToHttpEndpointForTesting:lt}}),gt){let{amazon_location_service:E}=gt;T.Geo={LocationService:{maps:E.maps,geofenceCollections:E.geofenceCollections,searchIndices:E.search_indices,region:E.region}}}if(Io&&(T.API={...T.API,REST:Io.reduce((E,Ae)=>{let{name:vs,endpoint:Rs,region:_o,service:xo}=Ae;return{...E,[vs]:{endpoint:Rs,...xo?{service:xo}:void 0,..._o?{region:_o}:void 0}}},{})}),Fe){let{VoiceId:E}=Fe?.convert?.speechGenerator?.defaults??{};T.Predictions=E?{...Fe,convert:{...Fe.convert,speechGenerator:{...Fe.convert.speechGenerator,defaults:{voiceId:E}}}}:Fe}return T},Oo=e=>e?.split(",")??[],Ms=({domain:e,scope:t,redirectSignIn:r,redirectSignOut:o,responseType:n})=>({domain:e,scopes:t,redirectSignIn:Oo(r),redirectSignOut:Oo(o),responseType:n}),Ds=e=>e.map(t=>{let r=t.toLowerCase();return r.charAt(0).toUpperCase()+r.slice(1)});function ko(e){let{version:t}=e;return t?t.startsWith("1"):!1}function Fs(e){if(!e)return;let{bucket_name:t,aws_region:r,buckets:o}=e;return{S3:{bucket:t,region:r,buckets:o&&zs(o)}}}function Ls(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:r,identity_pool_id:o,password_policy:n,mfa_configuration:i,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:c,username_attributes:u,standard_required_attributes:f,groups:l}=e,d={Cognito:{userPoolId:t,userPoolClientId:r,groups:l}};return o&&(d.Cognito={...d.Cognito,identityPoolId:o}),n&&(d.Cognito.passwordFormat={requireLowercase:n.require_lowercase,requireNumbers:n.require_numbers,requireUppercase:n.require_uppercase,requireSpecialCharacters:n.require_symbols,minLength:n.min_length??6}),i&&(d.Cognito.mfa={status:Bs(i),smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(d.Cognito.allowGuestAccess=a),c&&(d.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:c.response_type==="token"?"token":"code",scopes:c.scopes,providers:js(c.identity_providers)}}),u&&(d.Cognito.loginWith={...d.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),f&&(d.Cognito.userAttributes=f.reduce((m,A)=>({...m,[A]:{required:!0}}),{})),d}function Ks(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function Gs(e){if(!e)return;let{aws_region:t,geofence_collections:r,maps:o,search_indices:n}=e;return{LocationService:{region:t,searchIndices:n,geofenceCollections:r,maps:o}}}function Hs(e){if(!e)return;let{aws_region:t,default_authorization_type:r,url:o,api_key:n,model_introspection:i}=e;return{GraphQL:{endpoint:o,defaultAuthMode:Do(r),region:t,apiKey:n,modelIntrospection:i}}}function Vs(e){if(!e?.events)return;let{url:t,aws_region:r,api_key:o,default_authorization_type:n}=e.events;return{Events:{endpoint:t,defaultAuthMode:Do(n),region:r,apiKey:o}}}function Ws(e){if(!e)return;let{aws_region:t,channels:r,amazon_pinpoint_app_id:o}=e,n=r.includes("IN_APP_MESSAGING"),i=r.includes("APNS")||r.includes("FCM");if(!(n||i))return;let s={};return n&&(s.InAppMessaging={Pinpoint:{appId:o,region:t}}),i&&(s.PushNotification={Pinpoint:{appId:o,region:t}}),s}function Mo(e){let t={};if(e.storage&&(t.Storage=Fs(e.storage)),e.auth&&(t.Auth=Ls(e.auth)),e.analytics&&(t.Analytics=Ks(e.analytics)),e.geo&&(t.Geo=Gs(e.geo)),e.data&&(t.API=Hs(e.data)),e.custom){let r=Vs(e.custom);r&&"Events"in r&&(t.API={...t.API,...r})}return e.notifications&&(t.Notifications=Ws(e.notifications)),t}var $s={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function Do(e){return $s[e]}var No={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function js(e=[]){return e.reduce((t,r)=>(No[r]!==void 0&&t.push(No[r]),t),[])}function Bs(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function zs(e){let t={};return e.forEach(({name:r,bucket_name:o,aws_region:n,paths:i})=>{if(r in t)throw new Error(`Duplicate friendly name found: ${r}. Name must be unique.`);let s=i?Object.entries(i).reduce((a,[c,u])=>(u!==void 0&&(a[c]=u),a),{}):void 0;t[r]={bucketName:o,region:n,paths:s}}),t}var je=Symbol("oauth-listener");import Ys from"crypto";var St=new Uint8Array(256),yt=St.length;function Or(){return yt>St.length-16&&(Ys.randomFillSync(St),yt=0),St.slice(yt,yt+=16)}var P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).slice(1));function Fo(e,t=0){return P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]}import qs from"crypto";var Ur={randomUUID:qs.randomUUID};function Js(e,t,r){if(Ur.randomUUID&&!t&&!e)return Ur.randomUUID();e=e||{};let o=e.random||(e.rng||Or)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Fo(o)}var Nr=Js;var Lo=Nr;var O=URL,At=URLSearchParams;var Be=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?Uo(e):ko(e)?Mo(e):e;var Ko={convert(e,t){let r=e;return t?.urlSafe&&(r=r.replace(/-/g,"+").replace(/_/g,"/")),To()(r)}};var H;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(H||(H={}));var Xs={[H.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[H.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[H.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[H.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[H.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},It=se(Xs);function y(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,It(t,H.AuthUserPoolException)}function Ie(e){let t=!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType;It(t,H.OAuthNotConfigureException)}function Ee(e){let t=!!e?.identityPoolId;It(t,H.InvalidIdentityPoolIdException)}function b(e){let t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{let o=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(Ko.convert(o).split("").map(s=>`%${`00${s.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),i=JSON.parse(n);return{toString:()=>e,payload:i}}catch{throw new Error("Invalid token payload")}}var Et=e=>Object.keys(e).map(t=>t.toLowerCase()).sort().join(";");var Qs="X-Amz-Date";var Zs="X-Amz-Security-Token",Go="authorization",Ho="host",Vo=Qs.toLowerCase(),Wo=Zs.toLowerCase(),wt="aws4_request",Ct="AWS4-HMAC-SHA256",$o="AWS4",jo="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",Bo="UNSIGNED-PAYLOAD";var zo=(e,t,r)=>`${e}/${t}/${r}/${wt}`;var Yo=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}};var qo=({credentials:e,signingDate:t=new Date,signingRegion:r,signingService:o,uriEscapePath:n=!0})=>{let{accessKeyId:i,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:u}=Yo(t),f=zo(u,r,o);return{accessKeyId:i,credentialScope:f,longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:r,signingService:o,uriEscapePath:n}};function Jo(e,t,r,o){function n(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(f){try{u(o.next(f))}catch(l){s(l)}}function c(f){try{u(o.throw(f))}catch(l){s(l)}}function u(f){f.done?i(f.value):n(f.value).then(a,c)}u((o=o.apply(e,t||[])).next())})}function Xo(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,n,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return c([u,f])}}function c(u){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(o=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],n=0}finally{o=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var k=64,Qo=32,Zo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),en=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],tn=Math.pow(2,53)-1;var ze=function(){function e(){this.state=Int32Array.from(en),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>tn)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[r++],o--,this.bufferLength===k&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(r.setUint8(this.bufferLength++,128),o%k>=k-8){for(var n=this.bufferLength;n<k;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<k-8;n++)r.setUint8(n,0);r.setUint32(k-8,Math.floor(t/4294967296),!0),r.setUint32(k-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Qo),n=0;n<8;n++)i[n*4]=this.state[n]>>>24&255,i[n*4+1]=this.state[n]>>>16&255,i[n*4+2]=this.state[n]>>>8&255,i[n*4+3]=this.state[n]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,o=t.state,n=o[0],i=o[1],s=o[2],a=o[3],c=o[4],u=o[5],f=o[6],l=o[7],d=0;d<k;d++){if(d<16)this.temp[d]=(r[d*4]&255)<<24|(r[d*4+1]&255)<<16|(r[d*4+2]&255)<<8|r[d*4+3]&255;else{var m=this.temp[d-2],A=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=this.temp[d-15];var F=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;this.temp[d]=(A+this.temp[d-7]|0)+(F+this.temp[d-16]|0)}var R=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&f)|0)+(l+(Zo[d]+this.temp[d]|0)|0)|0,ie=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&s^i&s)|0;l=f,f=u,u=c,c=a+R|0,a=s,s=i,i=n,n=R+ie|0}o[0]+=n,o[1]+=i,o[2]+=s,o[3]+=a,o[4]+=c,o[5]+=u,o[6]+=f,o[7]+=l},e}();import{Buffer as rn}from"buffer";var on=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?rn.from(e,t):rn.from(e)};var kr=e=>{let t=on(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var ea=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:kr;function _t(e){return e instanceof Uint8Array?e:typeof e=="string"?ea(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function Mr(e){return typeof e=="string"?e.length===0:e.byteLength===0}var nn=function(){function e(t){this.secret=t,this.hash=new ze,this.reset()}return e.prototype.update=function(t){if(!(Mr(t)||this.error))try{this.hash.update(_t(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Jo(this,void 0,void 0,function(){return Xo(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new ze,this.secret){this.outer=new ze;var t=ta(this.secret),r=new Uint8Array(k);r.set(t);for(var o=0;o<k;o++)t[o]^=54,r[o]^=92;this.hash.update(t),this.outer.update(r);for(var o=0;o<t.byteLength;o++)t[o]=0}},e}();function ta(e){var t=_t(e);if(t.byteLength>k){var r=new ze;r.update(t),t=r.digest()}var o=new Uint8Array(k);return o.set(t),o}var sn={},ra={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),sn[e]=t,ra[t]=e}function an(e){let t="";for(let r=0;r<e.byteLength;r++)t+=sn[e[r]];return t}var Le=(e,t)=>{let r=new nn(e??void 0);return r.update(t),r.digestSync()},Ye=(e,t)=>{let r=Le(e,t);return an(r)};var cn=e=>Object.entries(e).map(([t,r])=>({key:t.toLowerCase(),value:r?.trim().replace(/\s+/g," ")??""})).sort((t,r)=>t.key<r.key?-1:1).map(t=>`${t.key}:${t.value}
`).join("");var fn=e=>Array.from(e).sort(([t,r],[o,n])=>t===o?r<n?-1:1:t<o?-1:1).map(([t,r])=>`${un(t)}=${un(r)}`).join("&"),un=e=>encodeURIComponent(e).replace(/[!'()*]/g,oa),oa=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var dn=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/";var pn=e=>e==null?jo:na(e)?Ye(null,e):Bo,na=e=>typeof e=="string"||ArrayBuffer.isView(e)||ia(e),ia=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var ln=({body:e,headers:t,method:r,url:o},n=!0)=>[r,dn(o.pathname,n),fn(o.searchParams),cn(t),Et(t),pn(e)].join(`
`);var mn=(e,t,r,o)=>{let n=`${$o}${e}`,i=Le(n,t),s=Le(i,r),a=Le(s,o);return Le(a,wt)};var gn=(e,t,r)=>[Ct,e,t,r].join(`
`);var hn=(e,{credentialScope:t,longDate:r,secretAccessKey:o,shortDate:n,signingRegion:i,signingService:s,uriEscapePath:a})=>{let c=ln(e,a),u=Ye(null,c),f=gn(r,t,u);return Ye(mn(o,n,i,s),f)};var yn=(e,t)=>{let r=qo(t),{accessKeyId:o,credentialScope:n,longDate:i,sessionToken:s}=r,a={...e.headers};a[Ho]=e.url.host,a[Vo]=i,s&&(a[Wo]=s);let c={...e,headers:a},u=hn(c,r),f=`Credential=${o}/${n}`,l=`SignedHeaders=${Et(a)}`,d=`Signature=${u}`;return a[Go]=`${Ct} ${f}, ${l}, ${d}`,c};var S;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(S||(S={}));var qe;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(qe||(qe={}));var Dr;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(Dr||(Dr={}));var Fr;(function(e){e.Record="1",e.IdentifyUser="2"})(Fr||(Fr={}));var Lr;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(Lr||(Lr={}));var M;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(M||(M={}));var Kr;(function(e){e.Subscribe="1",e.GraphQl="2"})(Kr||(Kr={}));var Gr;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(Gr||(Gr={}));var Hr;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(Hr||(Hr={}));var Vr;(function(e){e.None="0"})(Vr||(Vr={}));var Wr;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(Wr||(Wr={}));var $r;(function(e){e.Subscribe="1"})($r||($r={}));var jr;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(jr||(jr={}));var Br;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(Br||(Br={}));var zr="6.15.0";var de=()=>typeof global<"u";var G=()=>typeof window<"u",xt=()=>typeof document<"u",Ke=()=>typeof process<"u",pe=(e,t)=>!!Object.keys(e).find(r=>r.startsWith(t));function Sn(){let e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),r=()=>Array.from(document.querySelectorAll("[id]"));return xt()&&r().some(t)}function An(){return Ke()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("react"))}function In(){return G()&&pe(window,"__VUE")}function En(){return de()&&pe(global,"__VUE")}function wn(){return G()&&pe(window,"__SVELTE")}function Cn(){return Ke()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}function _n(){return G()&&window.next&&typeof window.next=="object"}function xn(){return de()&&(pe(global,"__next")||pe(global,"__NEXT"))}function Tn(){return G()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Pn(){return de()&&typeof global.__NUXT_PATHS__<"u"}function bn(){let e=!!(xt()&&document.querySelector("[ng-version]")),t=!!(G()&&typeof window.ng<"u");return e||t}function vn(){return Ke()&&typeof process.env=="object"&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}function Rn(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function On(){return de()&&typeof global.expo<"u"}function Un(){return G()}var sa=[{platform:S.Expo,detectionMethod:On},{platform:S.ReactNative,detectionMethod:Rn},{platform:S.NextJs,detectionMethod:_n},{platform:S.Nuxt,detectionMethod:Tn},{platform:S.Angular,detectionMethod:bn},{platform:S.React,detectionMethod:Sn},{platform:S.VueJs,detectionMethod:In},{platform:S.Svelte,detectionMethod:wn},{platform:S.WebUnknown,detectionMethod:Un},{platform:S.NextJsSSR,detectionMethod:xn},{platform:S.NuxtSSR,detectionMethod:Pn},{platform:S.ReactSSR,detectionMethod:An},{platform:S.VueJsSSR,detectionMethod:En},{platform:S.AngularSSR,detectionMethod:vn},{platform:S.SvelteSSR,detectionMethod:Cn}];function Nn(){return sa.find(e=>e.detectionMethod())?.platform||S.ServerSideUnknown}var Je,Tt=[],Pt=!1,aa=10,ca=10,ua=1e3,bt=()=>{if(!Je){if(Je=Nn(),Pt)for(;Tt.length;)Tt.pop()?.();else Tt.forEach(e=>{e()});kn(S.ServerSideUnknown,aa),kn(S.WebUnknown,ca)}return Je},Mn=e=>{Pt||Tt.push(e)};function fa(){Je=void 0}function kn(e,t){Je===e&&!Pt&&setTimeout(()=>{fa(),Pt=!0,setTimeout(bt,ua)},t)}var da={};var Dn=(e,t)=>da[e]?.[t]?.additionalDetails;var Fn="aws-amplify",Ln=e=>e.replace(/\+.*/,""),Yr=class{constructor(){this.userAgent=`${Fn}/${Ln(zr)}`}get framework(){return bt()}get isReactNative(){return this.framework===S.ReactNative||this.framework===S.Expo}observeFrameworkChanges(t){Mn(t)}},pa=new Yr,Kn=({category:e,action:t}={})=>{let r=[[Fn,Ln(zr)]];if(e&&r.push([e,t]),r.push(["framework",bt()]),e&&t){let o=Dn(e,t);o&&o.forEach(n=>{r.push(n)})}return r},ae=e=>Kn(e).map(([o,n])=>o&&n?`${o}/${n}`:o).join(" ");var Xe=class e extends w{get response(){return this._response?la(this._response):void 0}constructor(t){super(t),this.constructor=e,Object.setPrototypeOf(this,e.prototype),t.response&&(this._response=t.response)}},la=e=>({...e,headers:{...e.headers}});var ce=class extends w{constructor(){super({name:L.PlatformNotSupported,message:"Function not supported on current platform"})}};var Qe=(e,t)=>e.Auth.fetchAuthSession(t);var x=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Ze=new h("Hub"),vt=class{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,r){let o=this.listeners.get(t);if(!o){Ze.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:n})=>n!==r)])}dispatch(t,r,o,n){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(n===x||Ze.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));let i={channel:t,payload:{...r},source:o,patternInfo:[]};try{this._toListeners(i)}catch(s){Ze.error(s)}}listen(t,r,o="noname"){let n;if(typeof r!="function")throw new w({name:bo,message:"No callback supplied to Hub"});n=r;let i=this.listeners.get(t);return i||(i=[],this.listeners.set(t,i)),i.push({name:o,callback:n}),()=>{this._remove(t,n)}}_toListeners(t){let{channel:r,payload:o}=t,n=this.listeners.get(r);n&&n.forEach(i=>{Ze.debug(`Dispatching to ${r} with `,o);try{i.callback(t)}catch(s){Ze.error(s)}})}},v=new vt("__default__"),ma=new vt("internal-hub");var J=class e extends Xe{constructor(t){super(t),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var Rt=class e extends J{constructor(t={}){super({name:"CanceledError",message:"Request is canceled by user",...t}),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var qr=e=>{let t=Reflect.ownKeys(e);for(let r of t){let o=e[r];(o&&typeof o=="object"||typeof o=="function")&&qr(o)}return Object.freeze(e)};var Gn=new h("Auth"),Ot=class{configure(t,r){this.authConfig=t,this.authOptions=r,t&&t.Cognito?.userPoolEndpoint&&Gn.warn(Hn("Amazon Cognito User Pool")),t&&t.Cognito?.identityPoolEndpoint&&Gn.warn(Hn("Amazon Cognito Identity Pool"))}async fetchAuthSession(t={}){let r,o,n=await this.getTokens(t);return n?(o=n.accessToken?.payload?.sub,r=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:n,authenticated:!0,forceRefresh:t.forceRefresh})):r=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:n,credentials:r?.credentials,identityId:r?.identityId,userSub:o}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(t){return await this.authOptions?.tokenProvider?.getTokens(t)??void 0}},Hn=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;var Ut=class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Ot}configure(t,r){let o=Be(t);this.resourcesConfig=o,r&&(this.libraryOptions=r),this.resourcesConfig=qr(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),v.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",x),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[je](t){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?t(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=t}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},g=new Ut;var V=e=>Qe(g,e);function et(){return g.Auth.clearCredentials()}var we=e=>{let{headers:t,statusCode:r}=e;return{...ga(e)?e.$metadata:{},httpStatusCode:r,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},ga=e=>typeof e?.$metadata=="object";var K=async e=>{if(!e||e.statusCode<300)return;let t=await le(e),o=(s=>{let[a]=s.toString().split(/[,:]+/);return a.includes("#")?a.split("#")[1]:a})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),n=t.message??t.Message??"Unknown error",i=new Error(n);return Object.assign(i,{name:o,$metadata:we(e)})},le=async e=>{if(!e.body)throw new Error("Missing response payload");let t=await e.body.json();return Object.assign(t,{$metadata:we(e)})};var U=(e,t,r,o)=>async(n,i)=>{let s={...o,...n},a=await s.endpointResolver(s,i),c=await t(i,a),u=await e(c,{...s});return r(u)};var Jr="amz-sdk-invocation-id",Vn="amz-sdk-request";var Ce=e=>{let r=Ro(3e5)(e);return r===!1?3e5:r};var ya=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Wn=e=>!!e&&ya.includes(e);var _e=e=>async(t,r)=>{let o=r??await e(t)??void 0,n=o?.code||o?.name,i=t?.statusCode;return{retryable:Ea(r)||Ia(i,n)||Wn(n)||wa(i,n)}},Sa=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Aa=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ia=(e,t)=>e===429||!!t&&Sa.includes(t),Ea=e=>[L.NetworkError,"ERR_NETWORK"].includes(e?.name),wa=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Aa.includes(t);var Xr="cognito-identity",Nt={service:Xr,retryDecider:_e(K),computeDelay:Ce,cache:"no-store"};var xe=({maxAttempts:e=3,retryDecider:t,computeDelay:r,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(n,i)=>async function(a){let c,u=i.attemptsCount??0,f,l=()=>{if(f)return $n(f,u),f;throw $n(c,u),c};for(;!o?.aborted&&u<e;){try{f=await n(a),c=void 0}catch(A){c=A,f=void 0}u=(i.attemptsCount??0)>u?i.attemptsCount??0:u+1,i.attemptsCount=u;let{isCredentialsExpiredError:d,retryable:m}=await t(f,c,i);if(m){if(i.isCredentialsExpired=!!d,!o?.aborted&&u<e){let A=r(u);await Ca(A,o)}continue}else return l()}if(o?.aborted)throw new Error("Request aborted.");return l()}},Ca=(e,t)=>{if(t?.aborted)return Promise.resolve();let r,o,n=new Promise(i=>{o=i,r=setTimeout(i,e)});return t?.addEventListener("abort",function i(s){clearTimeout(r),t?.removeEventListener("abort",i),o()}),n},$n=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})};var Bn=()=>e=>async function(r){return r.headers[Jr]||(r.headers[Jr]=Lo()),e(r)};var zn=({maxAttempts:e=3})=>(t,r)=>async function(n){let i=r.attemptsCount??0;return n.headers[Vn]=`attempt=${i+1}; max=${e}`,t(n)};var Te=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>r=>async function(n){if(t.trim().length===0)return await r(n);{let i=e.toLowerCase();return n.headers[i]=n.headers[i]?`${n.headers[i]} ${t}`:t,await r(n)}};var W=(e,t)=>(r,o)=>{let n={},i=s=>e(s,o);for(let s=t.length-1;s>=0;s--){let a=t[s];i=a(o)(i,n)}return i(r)};var kt=e=>{let t;return()=>(t||(t=e()),t)};var _a=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Pe=async({url:e,method:t,headers:r,body:o},{abortSignal:n,cache:i,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(e,{method:t,headers:r,body:_a(t)?o:void 0,signal:n,cache:i,credentials:s?"include":"same-origin"})}catch(l){throw l instanceof TypeError?new w({name:L.NetworkError,message:"A network error has occurred.",underlyingError:l}):l}let c={};a.headers?.forEach((l,d)=>{c[d.toLowerCase()]=l});let u={statusCode:a.status,headers:c,body:null},f=Object.assign(a.body??{},{text:kt(()=>a.text()),blob:kt(()=>a.blob()),json:kt(()=>a.json())});return{...u,body:f}};var tt=W(Pe,[Te,Bn,xe,zn]);var Yn=()=>e=>async function(r){return r.headers["cache-control"]="no-store",e(r)};var Mt=W(tt,[Yn]);var Dt=e=>(t,r)=>{let o=xa(e),n=JSON.stringify(t);return Ta(r,o,n)},xa=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Ta=({url:e},t,r)=>({headers:t,url:e,body:r,method:"POST"});var Ft=e=>U(Mt,Dt("GetCredentialsForIdentity"),Pa,{...Nt,...e,userAgentValue:ae()}),Pa=async e=>{if(e.statusCode>=300)throw await K(e);let t=await le(e);return{IdentityId:t.IdentityId,Credentials:ba(t.Credentials),$metadata:we(e)}},ba=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(e*1e3)});var Qr=e=>U(Mt,Dt("GetId"),va,{...Nt,...e,userAgentValue:ae()}),va=async e=>{if(e.statusCode>=300)throw await K(e);return{IdentityId:(await le(e)).IdentityId,$metadata:we(e)}};var Zr={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},qn={partitions:[Zr,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]};var rt=e=>{let{partitions:t}=qn;for(let{regions:r,outputs:o,regionRegex:n}of t){let i=new RegExp(n);if(r.includes(e)||i.test(e))return o.dnsSuffix}return Zr.outputs.dnsSuffix};var eo=({region:e})=>({url:new O(`https://${Xr}.${e}.${rt(e)}`)});var X=class{constructor(t){this.storage=t}async setItem(t,r){if(!this.storage)throw new ce;this.storage.setItem(t,r)}async getItem(t){if(!this.storage)throw new ce;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new ce;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new ce;this.storage.clear()}};var be=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,r){this.storage.set(t,r)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}};var Jn=new h("CoreStorageUtils"),Lt=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{Jn.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new be},Kt=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return Jn.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new be}};var Gt=class extends X{constructor(){super(Lt())}};var Ht=class extends X{constructor(){super(Kt())}};var Vt=class{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new ce;return this._storage}setItem(t,r){this.storage.setItem(t,r)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}};var Wt=class extends Vt{constructor(){super(Kt())}};import $t from"js-cookie";var ot=class{constructor(t={}){let{path:r,domain:o,expires:n,sameSite:i,secure:s}=t;if(this.domain=o,this.path=r||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?n:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?s:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(i==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(t,r){$t.set(t,r,this.getData())}async getItem(t){return $t.get(t)??null}async removeItem(t){$t.remove(t,this.getData())}async clear(){let t=$t.get(),r=Object.keys(t).map(o=>this.removeItem(o));await Promise.all(r)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}};var $=new Gt,Ra=new Ht,Oa=new Wt,Ua=new X(new be);var me={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8},ue="CurSize";function to(e){let t=0;t=e.length;for(let r=e.length;r>=0;r-=1){let o=e.charCodeAt(r);o>127&&o<=2047?t+=1:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&(r-=1)}return t}function ge(){return new Date().getTime()}var ve=e=>`${e}${ue}`;var he;(function(e){e.NoCacheItem="NoCacheItem",e.NullNextNode="NullNextNode",e.NullPreviousNode="NullPreviousNode"})(he||(he={}));var Na={[he.NoCacheItem]:{message:"Item not found in the cache storage."},[he.NullNextNode]:{message:"Next node is null."},[he.NullPreviousNode]:{message:"Previous node is null."}},ro=se(Na);var I=new h("StorageCache"),jt=class{constructor({config:t,keyValueStorage:r}){this.config={...me,...t},this.keyValueStorage=r,this.sanitizeConfig()}getModuleName(){return"Cache"}configure(t){return t&&(t.keyPrefix&&I.warn("keyPrefix can not be re-configured on an existing Cache instance."),this.config={...this.config,...t}),this.sanitizeConfig(),this.config}async getCurrentCacheSize(){let t=await this.getStorage().getItem(ve(this.config.keyPrefix));return t||(await this.getStorage().setItem(ve(this.config.keyPrefix),"0"),t="0"),Number(t)}async setItem(t,r,o){if(I.debug(`Set item: key is ${t}, value is ${r} with options: ${o}`),!t||t===ue){I.warn(`Invalid key: should not be empty or reserved key: '${ue}'`);return}if(typeof r>"u"){I.warn("The value of item should not be undefined!");return}let n={priority:o?.priority!==void 0?o.priority:this.config.defaultPriority,expires:o?.expires!==void 0?o.expires:this.config.defaultTTL+ge()};if(n.priority<1||n.priority>5){I.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}let i=`${this.config.keyPrefix}${t}`,s=this.fillCacheItem(i,r,n);if(s.byteSize>this.config.itemMaxSize){I.warn(`Item with key: ${t} you are trying to put into is too big!`);return}try{let a=await this.getStorage().getItem(i);if(a&&await this.removeCacheItem(i,JSON.parse(a).byteSize),await this.isCacheFull(s.byteSize)){let c=await this.clearInvalidAndGetRemainingKeys();if(await this.isCacheFull(s.byteSize)){let u=await this.sizeToPop(s.byteSize);await this.popOutItems(c,u)}}return this.setCacheItem(i,s)}catch(a){I.warn(`setItem failed! ${a}`)}}async getItem(t,r){I.debug(`Get item: key is ${t} with options ${r}`);let o;if(!t||t===ue)return I.warn(`Invalid key: should not be empty or reserved key: '${ue}'`),null;let n=`${this.config.keyPrefix}${t}`;try{if(o=await this.getStorage().getItem(n),o!=null)if(await this.isExpired(n))await this.removeCacheItem(n,JSON.parse(o).byteSize);else return(await this.updateVisitedTime(JSON.parse(o),n)).data;if(r?.callback){let i=r.callback();return i!==null&&await this.setItem(t,i,r),i}return null}catch(i){return I.warn(`getItem failed! ${i}`),null}}async removeItem(t){if(I.debug(`Remove item: key is ${t}`),!t||t===ue){I.warn(`Invalid key: should not be empty or reserved key: '${ue}'`);return}let r=`${this.config.keyPrefix}${t}`;try{let o=await this.getStorage().getItem(r);o&&await this.removeCacheItem(r,JSON.parse(o).byteSize)}catch(o){I.warn(`removeItem failed! ${o}`)}}async getAllKeys(){try{return await this.getAllCacheKeys()}catch(t){return I.warn(`getAllkeys failed! ${t}`),[]}}getStorage(){return this.keyValueStorage}async isExpired(t){let r=await this.getStorage().getItem(t);ro(r!==null,he.NoCacheItem,`Key: ${t}`);let o=JSON.parse(r);return ge()>=o.expires}async removeCacheItem(t,r){let o=await this.getStorage().getItem(t);ro(o!==null,he.NoCacheItem,`Key: ${t}`);let n=r??JSON.parse(o).byteSize;await this.decreaseCurrentSizeInBytes(n);try{await this.getStorage().removeItem(t)}catch(i){await this.increaseCurrentSizeInBytes(n),I.error(`Failed to remove item: ${i}`)}}fillCacheItem(t,r,o){let n={key:t,data:r,timestamp:ge(),visitedTime:ge(),priority:o.priority??0,expires:o.expires??0,type:typeof r,byteSize:0};return n.byteSize=to(JSON.stringify(n)),n.byteSize=to(JSON.stringify(n)),n}sanitizeConfig(){this.config.itemMaxSize>this.config.capacityInBytes&&(I.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=me.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(I.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=me.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(I.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=me.warningThreshold);let t=5*1024*1024;this.config.capacityInBytes>t&&(I.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=me.capacityInBytes)}async increaseCurrentSizeInBytes(t){let r=await this.getCurrentCacheSize();await this.getStorage().setItem(ve(this.config.keyPrefix),(r+t).toString())}async decreaseCurrentSizeInBytes(t){let r=await this.getCurrentCacheSize();await this.getStorage().setItem(ve(this.config.keyPrefix),(r-t).toString())}async updateVisitedTime(t,r){return t.visitedTime=ge(),await this.getStorage().setItem(r,JSON.stringify(t)),t}async setCacheItem(t,r){await this.increaseCurrentSizeInBytes(r.byteSize);try{await this.getStorage().setItem(t,JSON.stringify(r))}catch(o){await this.decreaseCurrentSizeInBytes(r.byteSize),I.error(`Failed to set item ${o}`)}}async sizeToPop(t){let o=await this.getCurrentCacheSize()+t-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return o>n?o:n}async isCacheFull(t){let r=await this.getCurrentCacheSize();return t+r>this.config.capacityInBytes}async popOutItems(t,r){let o=[],n=r;for(let i of t){let s=await this.getStorage().getItem(i);if(s!=null){let a=JSON.parse(s);o.push(a)}}o.sort((i,s)=>i.priority>s.priority?-1:i.priority<s.priority?1:i.visitedTime<s.visitedTime?-1:1);for(let i of o)if(await this.removeCacheItem(i.key,i.byteSize),n-=i.byteSize,n<=0)return}async clearInvalidAndGetRemainingKeys(){let t=[],r=await this.getAllCacheKeys({omitSizeKey:!0});for(let o of r)await this.isExpired(o)?await this.removeCacheItem(o):t.push(o);return t}async clear(){I.debug("Clear Cache");try{let t=await this.getAllKeys();for(let r of t){let o=`${this.config.keyPrefix}${r}`;await this.getStorage().removeItem(o)}}catch(t){I.warn(`clear failed! ${t}`)}}};var ka=new h("StorageCache"),Bt=class e extends jt{constructor(t){let r=Lt();super({config:t,keyValueStorage:new X(r)}),this.storage=r,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this)}async getAllCacheKeys(t){let{omitSizeKey:r}=t??{},o=[];for(let n=0;n<this.storage.length;n++){let i=this.storage.key(n);r&&i===ve(this.config.keyPrefix)||i?.startsWith(this.config.keyPrefix)&&o.push(i.substring(this.config.keyPrefix.length))}return o}createInstance(t){return(!t.keyPrefix||t.keyPrefix===me.keyPrefix)&&(ka.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=ge.toString()),new e(t)}};var Ma=new Bt;var Da=new h("I18n"),Xn=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),Da.debug(this._lang)}setLanguage(t){this._lang=t}get(t,r=void 0){if(this.setDefaultLanguage(),!this._lang)return typeof r<"u"?r:t;let o=this._lang,n=this.getByLanguage(t,o);return n||(o.indexOf("-")>0&&(n=this.getByLanguage(t,o.split("-")[0])),n)?n:typeof r<"u"?r:t}getByLanguage(t,r,o=null){if(!r)return o;let n=this._dict[r];return n?n[t]:o}putVocabulariesForLanguage(t,r){let o=this._dict[t];o||(o=this._dict[t]={}),this._dict[t]={...o,...r}}putVocabularies(t){Object.keys(t).forEach(r=>{this.putVocabulariesForLanguage(r,t[r])})}};var ye;(function(e){e.NotConfigured="NotConfigured"})(ye||(ye={}));var Fa={[ye.NotConfigured]:{message:"i18n is not configured."}},nt=se(Fa);var Qn=new h("I18n"),zt={language:null},j=null,Yt=class e{static configure(t){return Qn.debug("configure I18n"),t&&(zt=Object.assign({},zt,t.I18n||t),e.createInstance()),zt}static getModuleName(){return"I18n"}static createInstance(){Qn.debug("create I18n instance"),!j&&(j=new Xn)}static setLanguage(t){e.checkConfig(),nt(!!j,ye.NotConfigured),j.setLanguage(t)}static get(t,r){return e.checkConfig()?(nt(!!j,ye.NotConfigured),j.get(t,r)):typeof r>"u"?t:r}static putVocabulariesForLanguage(t,r){e.checkConfig(),nt(!!j,ye.NotConfigured),j.putVocabulariesForLanguage(t,r)}static putVocabularies(t){e.checkConfig(),nt(!!j,ye.NotConfigured),j.putVocabularies(t)}static checkConfig(){return j||e.createInstance(),!0}};Yt.createInstance();var qt=e=>new Date(Date.now()+e);var La=5*60*1e3,Zn=(e,t)=>Math.abs(qt(t).getTime()-e)>=La;var ei=(e,t)=>Zn(e,t)?e-Date.now():t;var oo=({credentials:e,region:t,service:r,uriEscapePath:o=!0})=>{let n;return(i,s)=>async function(c){n=n??0;let u={credentials:typeof e=="function"?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:qt(n),signingRegion:t,signingService:r,uriEscapePath:o},f=await yn(c,u),l=await i(f),d=Ka(l);return d&&(n=ei(Date.parse(d),n)),l}},Ka=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];var Re;(function(e){e.InvalidApiName="InvalidApiName"})(Re||(Re={}));var Jt={[Re.InvalidApiName]:{message:"API name is invalid.",recoverySuggestion:"Check if the API name matches the one in your configuration or `aws-exports.js`"}};var Xt=async e=>{if(!e)return;let t=await K(Ga(e));if(t){let r=await e.body?.text();return Ha(t,{statusCode:e.statusCode,headers:e.headers,body:r})}},Ga=e=>{let t,r=new Proxy(e.body,{get(n,i,s){return i==="json"?async()=>{t||(t=n.text());try{return JSON.parse(await t)}catch{return{}}}:i==="text"?async()=>(t||(t=n.text()),t):Reflect.get(n,i,s)}});return new Proxy(e,{get(n,i,s){return i==="body"?r:Reflect.get(n,i,s)}})},Ha=(e,t)=>{let r=new J({name:e?.name,message:e.message,underlyingError:e,response:t});return Object.assign(r,{$metadata:e.$metadata})};var Oe=new h("RestApis");function ti(e,t){let r=c=>!!t,o=new AbortController,n=o.signal,i=t?.signal,s,a=async()=>{try{let c=await(r(e)?e():e(n));if(c.statusCode>=300)throw await Xt(c);return c}catch(c){let u=i??n,f=s??u.reason;if(c.name==="AbortError"||u?.aborted===!0){let l=new Rt({...f&&{message:f},underlyingError:c,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw Oe.debug(c),l}throw Oe.debug(c),c}};if(r())return a();{let c=u=>{n.aborted!==!0&&(o.abort(u),u&&n.reason!==u&&(s=u))};return{response:a(),cancel:c}}}var no="execute-api";var ri="us-east-1",oi=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/;var Qt=(e,t)=>{let{service:r=no,region:o=ri}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:n}=e,[,i,s]=oi.exec(n)??[];return i===no?{service:i,region:s??o}:i==="appsync-api"?{service:"appsync",region:s??o}:{service:r,region:o}};function ni(e,t){let{message:r,recoverySuggestion:o}=Jt[t];if(!e)throw new J({name:t,message:r,recoverySuggestion:o})}var ii=(e,t,r,o)=>{let n=e.getConfig()?.API?.REST?.[t]?.endpoint;ni(!!n,Re.InvalidApiName);try{let i=new O(n+r);if(o){let s=new At(i.searchParams);Object.entries(o).forEach(([a,c])=>{s.set(a,c)}),i.search=new At(s).toString()}return i}catch{throw new J({name:Re.InvalidApiName,...Jt[Re.InvalidApiName],recoverySuggestion:`Please make sure the REST endpoint URL is a valid URL string. Got ${n}`})}};var si=({headers:e},t)=>!e.authorization&&!!t;var ai=(e,t)=>{let r={};for(let o in e)r[o.toLowerCase()]=e[o];return t&&(r["content-type"]="application/json; charset=UTF-8",t instanceof FormData&&delete r["content-type"]),r};var ci=W(Pe,[Te,xe,oo]);var ui=W(Pe,[Te,xe]);var fi=async(e,t,r,o)=>{let{url:n,method:i,headers:s,body:a,withCredentials:c,abortSignal:u,retryStrategy:f}=t,l=a?a instanceof FormData?a:JSON.stringify(a??""):void 0,d=ai(s,a),m={url:n,headers:d,method:i,body:l},A={retryDecider:Va(f??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:Ce,withCrossDomainCredentials:c,abortSignal:u},F=r(m,o),R,ie=await Wa(e);if(F&&ie){let Se=Qt(n),pt=o?.service??Se.service,lt=o?.region??Se.region;R=await ci(m,{...A,credentials:ie,region:lt,service:pt})}else R=await ui(m,{...A});return{statusCode:R.statusCode,headers:R.headers,body:R.body}},Va=e=>e?.strategy==="no-retry"?()=>Promise.resolve({retryable:!1}):_e(Xt),Wa=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch{Oe.debug("No credentials available, the request will be unsigned.")}return null};var Ge=(e,t,r)=>ti(async o=>{let{apiName:n,options:i={},path:s}=t,a=ii(e,n,s,i?.queryParams),c=await e.libraryOptions?.API?.REST?.headers?.({apiName:n}),{headers:u={}}=i,f={...c,...u},l=Qt(a,{amplify:e,apiName:n});return Oe.debug(r,a,f,`IAM signing options: ${JSON.stringify(l)}`),fi(e,{...i,url:a,method:r,headers:f,abortSignal:o},si,l)}),di=(e,t)=>Ge(e,t,"GET"),pi=(e,t)=>Ge(e,t,"POST"),li=(e,t)=>Ge(e,t,"PUT"),mi=(e,t)=>Ge(e,t,"DELETE"),gi=(e,t)=>Ge(e,t,"HEAD"),hi=(e,t)=>Ge(e,t,"PATCH");var Zt=e=>di(g,e),er=e=>pi(g,e),tr=e=>li(g,e),rr=e=>mi(g,e),or=e=>gi(g,e),nr=e=>hi(g,e);import{dispatch as Vc}from"@wordpress/data";var C;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(C||(C={}));var ry={[C.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[C.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[C.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[C.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[C.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[C.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[C.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[C.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[C.EmptySignInPassword]:{message:"password is required to signIn"},[C.EmptySignInUsername]:{message:"username is required to signIn"},[C.EmptySignUpPassword]:{message:"password is required to signUp"},[C.EmptySignUpUsername]:{message:"username is required to signUp"},[C.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[C.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[C.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[C.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[C.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}},_;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(_||(_={}));var ir;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(ir||(ir={}));var p=class e extends w{constructor(t){super(t),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};function B(e){let t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new p({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function it(e){if(!e||!e.includes(":"))throw new p({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function yi(e){let t={};return e?.forEach(r=>{r.Name&&(t[r.Name]=r.Value)}),t}var He="UserUnAuthenticatedException";var ja="InvalidRedirectException",Ba="InvalidAppSchemeException",za="InvalidPreferredRedirectUrlException",Si=new p({name:ja,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),fy=new p({name:Ba,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),Ai=new p({name:za,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),Ya="InvalidOriginException",Ii=new p({name:Ya,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),Ei="OAuthSignOutException",wi="TokenRefreshException",Ci="UnexpectedSignInInterruptionException";function Q(e){if(!e||!e.accessToken)throw new p({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function _i(e){if(!e||!e.idToken)throw new p({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}var qa=new p({name:wi,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Ja=new p({name:He,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function sr(e){if(Qa(e))throw qa;if(!Xa(e))throw Ja}var xi={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Ti(e){return e?.accessToken||e?.idToken}function Xa(e){return Ti(e)&&e?.refreshToken}function Qa(e){return Ti(e)&&!e?.refreshToken}var Pi=async e=>{let t=e.getConfig().Auth?.Cognito;y(t);let r=await e.Auth.getTokens({forceRefresh:!1});Q(r);let{"cognito:username":o,sub:n}=r.idToken?.payload??{},i={username:o,userId:n},s=Za(r);return s&&(i.signInDetails=s),i};function Za(e){return e?.signInDetails}var st=async()=>Pi(g);var z=(e,t)=>ae({category:qe.Auth,action:e,...t});var Z=e=>(t,r)=>{let o=ec(e),n=JSON.stringify(t);return tc(r,o,n)},ec=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),tc=({url:e},t,r)=>({headers:t,url:e,body:r,method:"POST"});function fe(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new p({name:L.Unknown,message:"An unknown error has occurred.",underlyingError:e})}var ee=()=>async e=>{if(e.statusCode>=300){let t=await K(e);throw fe(t),new p({name:t.name,message:t.message,metadata:t.$metadata})}return le(e)};var rc=()=>(e,t)=>async function(o){return o.headers["cache-control"]="no-store",e(o)},te=W(tt,[rc]);var ar="cognito-idp";var re={service:ar,retryDecider:_e(K),computeDelay:Ce,userAgentValue:ae(),cache:"no-store"};var bi=e=>U(te,Z("InitiateAuth"),ee(),{...re,...e});var vi=({region:e})=>({url:new O(`https://${ar}.${e}.${rt(e)}`)});var Y=({endpointOverride:e})=>t=>e?{url:new O(e)}:vi(t);function Ri({username:e,userPoolId:t,userPoolClientId:r}){if(typeof window>"u")return;let o=window.AmazonCognitoAdvancedSecurityData;if(typeof o>"u")return;let n=o.getData(e,t,r);return n?{EncodedData:n}:{}}var oc=async({tokens:e,authConfig:t,username:r})=>{y(t?.Cognito);let{userPoolId:o,userPoolClientId:n,userPoolEndpoint:i}=t.Cognito,s=B(o);sr(e);let a=e.refreshToken,c={REFRESH_TOKEN:a};e.deviceMetadata?.deviceKey&&(c.DEVICE_KEY=e.deviceMetadata.deviceKey);let u=Ri({username:r,userPoolId:o,userPoolClientId:n}),f=bi({endpointResolver:Y({endpointOverride:i})}),{AuthenticationResult:l}=await f({region:s},{ClientId:n,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:c,UserContextData:u}),d=b(l?.AccessToken??""),m=l?.IdToken?b(l.IdToken):void 0,{iat:A}=d.payload;if(!A)throw new p({name:"iatNotFoundException",message:"iat not found in access token"});let F=A*1e3-new Date().getTime();return{accessToken:d,idToken:m,clockDrift:F,refreshToken:a,username:r}},Oi=Rr(oc);var Ui={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var at;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(at||(at={}));var nc={[at.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},Ni=se(nc);var io="CognitoIdentityServiceProvider";var cr=class{getKeyValueStorage(){if(!this.keyValueStorage)throw new p({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{let t=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(t.accessToken);if(!r)throw new p({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let o=b(r),n=await this.getKeyValueStorage().getItem(t.idToken),i=n?b(n):void 0,s=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,a=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",c=Number.parseInt(a),u=await this.getKeyValueStorage().getItem(t.signInDetails),f={accessToken:o,idToken:i,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:c,username:await this.getLastAuthUser()};return u&&(f.signInDetails=JSON.parse(u)),f}catch{return null}}async storeTokens(t){Ni(t!==void 0,at.InvalidAuthTokens);let r=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),r);let o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken?await this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()):await this.getKeyValueStorage().removeItem(o.idToken),t.refreshToken?await this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken):await this.getKeyValueStorage().removeItem(o.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)):await this.getKeyValueStorage().removeItem(o.signInDetails),await this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)}async clearTokens(){let t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){let r=await this.getAuthKeys(t),o=await this.getKeyValueStorage().getItem(r.deviceKey),n=await this.getKeyValueStorage().getItem(r.deviceGroupKey),i=await this.getKeyValueStorage().getItem(r.randomPasswordKey);return i&&n&&o?{deviceKey:o,deviceGroupKey:n,randomPassword:i}:null}async clearDeviceMetadata(t){let r=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(r.deviceKey),this.getKeyValueStorage().removeItem(r.deviceGroupKey),this.getKeyValueStorage().removeItem(r.randomPasswordKey)])}async getAuthKeys(t){y(this.authConfig?.Cognito);let r=t??await this.getLastAuthUser();return ic(io,`${this.authConfig.Cognito.userPoolClientId}.${r}`)}getLastAuthUserKey(){y(this.authConfig?.Cognito);let t=this.authConfig.Cognito.userPoolClientId;return`${io}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){let{oauthMetadata:r}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r,JSON.stringify(t))}async getOAuthMetadata(){let{oauthMetadata:t}=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(t);return r&&JSON.parse(r)}},ic=(e,t)=>ct(Ui)(`${e}`,t);function ct(e){let t=Object.values({...e});return(r,o)=>t.reduce((n,i)=>({...n,[i]:`${r}.${o}.${i}`}),{})}var ki="amplify-signin-with-hostedUI",oe="CognitoIdentityServiceProvider",Ve=class{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(ki),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){y(this.cognitoConfig);let r=ne(oe,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthState,t)}loadPKCE(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){y(this.cognitoConfig);let r=ne(oe,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){y(this.cognitoConfig);let r=ne(oe,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.inflightOAuth,`${t}`)}async loadOAuthSignIn(){y(this.cognitoConfig);let t=ne(oe,this.cognitoConfig.userPoolClientId),r=await this.keyValueStorage.getItem(ki),[o,n]=(await this.keyValueStorage.getItem(t.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:o==="true"||r==="true",preferPrivateSession:n==="true"}}async storeOAuthSignIn(t,r=!1){y(this.cognitoConfig);let o=ne(oe,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(o.oauthSignIn,`${t},${r}`)}},ne=(e,t)=>ct(xi)(e,t);var D=new Ve($);var so=[],Mi=e=>{so.push(e)},ur=()=>{for(;so.length;)so.pop()?.()};var fr=class{constructor(){this.waitForInflightOAuth=$e()?async()=>{if(await D.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,r)=>{Mi(t)}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){D.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new p({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new p({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){let r;try{y(this.authConfig?.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,r=await this.getTokenStore().loadTokens();let o=await this.getTokenStore().getLastAuthUser();if(r===null)return null;let n=!!r?.idToken&&ht({expiresAt:(r.idToken?.payload?.exp??0)*1e3,clockDrift:r.clockDrift??0}),i=ht({expiresAt:(r.accessToken?.payload?.exp??0)*1e3,clockDrift:r.clockDrift??0});return(t?.forceRefresh||n||i)&&(r=await this.refreshTokens({tokens:r,username:o}),r===null)?null:{accessToken:r?.accessToken,idToken:r?.idToken,signInDetails:r?.signInDetails}}async refreshTokens({tokens:t,username:r}){try{let{signInDetails:o}=t,n=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:r});return n.signInDetails=o,await this.setTokens({tokens:n}),v.dispatch("auth",{event:"tokenRefresh"},"Auth",x),n}catch(o){return this.handleErrors(o)}}handleErrors(t){if(fe(t),t.name!==L.NetworkError&&this.clearTokens(),v.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",x),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}};var dr=class{constructor(){this.authTokenStore=new cr,this.authTokenStore.setKeyValueStorage($),this.tokenOrchestrator=new fr,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Oi)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}};var Ue=new dr,{tokenOrchestrator:q}=Ue;async function ao(e){if(e.AccessToken){let t=b(e.AccessToken),r=(t.payload.iat||0)*1e3,o=new Date().getTime(),n=r>0?r-o:0,i,s,a;e.RefreshToken&&(s=e.RefreshToken),e.IdToken&&(i=b(e.IdToken)),e?.NewDeviceMetadata&&(a=e.NewDeviceMetadata);let c={accessToken:t,idToken:i,refreshToken:s,clockDrift:n,deviceMetadata:a,username:e.username};e?.signInDetails&&(c.signInDetails=e.signInDetails),await q.setTokens({tokens:c})}else throw new w({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}var sc="Unable to get user session following successful sign-in.",Di=async()=>{try{v.dispatch("auth",{event:"signedIn",data:await st()},"Auth",x)}catch(e){throw e.name===He?new p({name:Ci,message:sc,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};function co(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP";if(e==="EMAIL_OTP")return"EMAIL"}function Fi(e){if(e)return e.map(co).filter(Boolean)}var Li=e=>U(te,Z("SetUserMFAPreference"),ee(),{...re,...e});async function fo(e){let{sms:t,totp:r,email:o}=e,n=g.getConfig().Auth?.Cognito;y(n);let{userPoolEndpoint:i,userPoolId:s}=n,{tokens:a}=await V({forceRefresh:!1});Q(a),await Li({endpointResolver:Y({endpointOverride:i})})({region:B(s),userAgentValue:z(M.UpdateMFAPreference)},{AccessToken:a.accessToken.toString(),SMSMfaSettings:uo(t),SoftwareTokenMfaSettings:uo(r),EmailMfaSettings:uo(o)})}function uo(e){if(e==="DISABLED")return{Enabled:!1};if(e==="PREFERRED")return{Enabled:!0,PreferredMfa:!0};if(e==="ENABLED")return{Enabled:!0};if(e==="NOT_PREFERRED")return{Enabled:!0,PreferredMfa:!1}}var pr=e=>U(te,Z("GetUser"),ee(),{...re,...e});async function po(){let e=g.getConfig().Auth?.Cognito;y(e);let{userPoolEndpoint:t,userPoolId:r}=e,{tokens:o}=await V({forceRefresh:!1});Q(o);let n=pr({endpointResolver:Y({endpointOverride:t})}),{PreferredMfaSetting:i,UserMFASettingList:s}=await n({region:B(r),userAgentValue:z(M.FetchMFAPreference)},{AccessToken:o.accessToken.toString()});return{preferred:co(i),enabled:Fi(s)}}var bA=new h("AuthError");var Ki={oauthSignInError:{message:_.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:_.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:_.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:_.EMPTY_USERNAME},invalidUsername:{message:_.INVALID_USERNAME},emptyPassword:{message:_.EMPTY_PASSWORD},emptyCode:{message:_.EMPTY_CODE},signUpError:{message:_.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:_.NO_MFA},invalidMFA:{message:_.INVALID_MFA},emptyChallengeResponse:{message:_.EMPTY_CHALLENGE},noUserSession:{message:_.NO_USER_SESSION},deviceConfig:{message:_.DEVICE_CONFIG},networkError:{message:_.NETWORK_ERROR},autoSignInError:{message:_.AUTOSIGNIN_ERROR},default:{message:_.DEFAULT_MSG}};var We=(e,t)=>new p({message:e??"An error has occurred during the oauth process.",name:ir.OAuthSignInError,recoverySuggestion:t??Ki.oauthSignInError.log});var lr;(function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError"})(lr||(lr={}));var ac="`signInWithRedirect` has been canceled.",cc="An error occurred while validating the state.",uc="Try to initiate an OAuth flow from Amplify",lo=async e=>{let t=await D.loadOAuthState(),r=e===t?t:void 0;if(!r)throw new p({name:lr.OAuthSignInError,message:e===null?ac:cc,recoverySuggestion:e===null?void 0:uc});return r};var Gi=async({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,responseType:n,domain:i,preferPrivateSession:s})=>{let a=new O(e),c=a.searchParams.get("error"),u=a.searchParams.get("error_description");if(c)throw We(u??c);return n==="code"?fc({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,domain:i,preferPrivateSession:s}):dc({currentUrl:e,redirectUri:o,preferPrivateSession:s})},fc=async({currentUrl:e,userAgentValue:t,clientId:r,redirectUri:o,domain:n,preferPrivateSession:i})=>{let s=new O(e),a=s.searchParams.get("code"),c=s.searchParams.get("state");if(!a||!c)throw We("User cancelled OAuth flow.");let u=await lo(c),f="https://"+n+"/oauth2/token",l=await D.loadPKCE(),d={grant_type:"authorization_code",code:a,client_id:r,redirect_uri:o,...l?{code_verifier:l}:{}},m=Object.entries(d).map(([Cr,gt])=>`${encodeURIComponent(Cr)}=${encodeURIComponent(gt)}`).join("&"),{access_token:A,refresh_token:F,id_token:R,error:ie,error_message:Se,token_type:pt,expires_in:lt}=await(await fetch(f,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[br]:t},body:m})).json();if(ie)throw We(Se??ie);let mt=(A&&b(A).payload.username)??"username";return await ao({username:mt,AccessToken:A,IdToken:R,RefreshToken:F}),Hi({redirectUri:o,state:u,preferPrivateSession:i})},dc=async({currentUrl:e,redirectUri:t,preferPrivateSession:r})=>{let o=new O(e),{id_token:n,access_token:i,state:s,token_type:a,expires_in:c,error_description:u,error:f}=(o.hash??"#").substring(1).split("&").map(m=>m.split("=")).reduce((m,[A,F])=>({...m,[A]:F}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(f)throw We(u??f);if(!i)throw We("No access token returned from OAuth flow.");let l=await lo(s),d=(i&&b(i).payload.username)??"username";return await ao({username:d,AccessToken:i,IdToken:n}),Hi({redirectUri:t,state:l,preferPrivateSession:r})},Hi=async({redirectUri:e,state:t,preferPrivateSession:r})=>{await q.setOAuthMetadata({oauthSignIn:!0}),await D.clearOAuthData(),await D.storeOAuthSignIn(!0,r),ur(),mc(e),pc(t)&&v.dispatch("auth",{event:"customOAuthState",data:vr(lc(t))},"Auth",x),v.dispatch("auth",{event:"signInWithRedirect"},"Auth",x),await Di()},pc=e=>/-/.test(e),lc=e=>e.split("-").splice(1).join("-"),mc=e=>{typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",e)};function mr(e,t){if(t){let r=e?.find(o=>o===t);if(!r)throw Ai;return r}else{let r=e?.find(gc)??e?.find(hc),o=e?.find(Sc)??e?.find(yc);if(r)return r;throw o?Ii:Si}}var gc=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),hc=e=>e.includes(String(window.location.hostname)),yc=e=>e.startsWith("http://"),Sc=e=>e.startsWith("https://");var Vi=async e=>{ur(),await D.clearOAuthInflightData(),v.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",x)};var Wi=async e=>{try{y(e),Ie(e),D.setAuthConfig(e)}catch{return}if(await D.loadOAuthInFlight())try{let t=window.location.href,{loginWith:r,userPoolClientId:o}=e,{domain:n,redirectSignIn:i,responseType:s}=r.oauth,a=mr(i);await Gi({currentUrl:t,clientId:o,domain:n,redirectUri:a,responseType:s,userAgentValue:z(M.SignInWithRedirect)})}catch(t){await Vi(t)}};$e()&&g[je](Wi);var $i=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var ji=async e=>{let t=e.getConfig().Auth?.Cognito;y(t);let{userPoolEndpoint:r,userPoolId:o}=t,{tokens:n}=await Qe(e,{forceRefresh:!1});Q(n);let i=pr({endpointResolver:Y({endpointOverride:r})}),{UserAttributes:s}=await i({region:B(o),userAgentValue:z(M.FetchUserAttributes)},{AccessToken:n.accessToken.toString()});return yi(s)};var mo=()=>ji(g);var Bi=async e=>{await e.clearOAuthData(),q.clearTokens(),await et(),v.dispatch("auth",{event:"signedOut"},"Auth",x)};var zi=async(e,t=!1,r)=>{Ie(e);let{loginWith:o,userPoolClientId:n}=e,{domain:i,redirectSignOut:s}=o.oauth,a=mr(s,r),c=`https://${i}/logout?${Object.entries({client_id:n,logout_uri:encodeURIComponent(a)}).map(([u,f])=>`${u}=${f}`).join("&")}`;return $i(c)};var Yi=async(e,t,r,o)=>{let{isOAuthSignIn:n}=await t.loadOAuthSignIn(),i=await r.getOAuthMetadata();if(await Bi(t),n||i?.oauthSignIn)return zi(e,!1,o)};var qi=e=>U(te,Z("RevokeToken"),ee(),{...re,...e});var Ji=e=>U(te,Z("GlobalSignOut"),ee(),{...re,...e});var Xi=new h("Auth");async function gr(e){let t=g.getConfig().Auth?.Cognito;y(t),e?.global?await Ic(t):await Ac(t);let r;try{Ie(t),r=!0}catch{r=!1}if(r){let o=new Ve($);o.setAuthConfig(t);let{type:n}=await Yi(t,o,q,e?.oauth?.redirectUrl)??{};if(n==="error")throw new p({name:Ei,message:"An error occurred when attempting to log out from OAuth provider."})}else q.clearTokens(),await et(),v.dispatch("auth",{event:"signedOut"},"Auth",x)}async function Ac(e){try{let{userPoolEndpoint:t,userPoolId:r,userPoolClientId:o}=e,n=await q.getTokenStore().loadTokens();sr(n),Ec(n.accessToken)&&await qi({endpointResolver:Y({endpointOverride:t})})({region:B(r),userAgentValue:z(M.SignOut)},{ClientId:o,Token:n.refreshToken})}catch{Xi.debug("Client signOut error caught but will proceed with token removal")}}async function Ic(e){try{let{userPoolEndpoint:t,userPoolId:r}=e,o=await q.getTokenStore().loadTokens();Q(o),await Ji({endpointResolver:Y({endpointOverride:t})})({region:B(r),userAgentValue:z(M.SignOut)},{AccessToken:o.accessToken.toString()})}catch{Xi.debug("Global signOut error caught but will proceed with token removal")}}var Ec=e=>!!e?.payload?.origin_jti;var Qi={identityId:"identityId"};var wc=new h("DefaultIdentityIdStore"),Ne=class{setAuthConfig(t){Ee(t.Cognito),this.authConfig=t,this._authKeys=Cc("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}async loadIdentityId(){Ee(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let t=await this.keyValueStorage.getItem(this._authKeys.identityId);return t?(this._hasGuestIdentityId=!0,{id:t,type:"guest"}):null}}catch(t){return wc.log("Error getting stored IdentityId.",t),null}}async storeIdentityId(t){Ee(this.authConfig?.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}},Cc=(e,t)=>ct(Qi)(`com.amplify.${e}`,t);var ut=({endpointOverride:e})=>t=>e?{url:new O(e)}:eo(t);function hr(e){let t=b(e).payload.iss,r={};if(!t)throw new p({name:"InvalidIdTokenException",message:"Invalid Idtoken."});let o=t.replace(/(^\w+:|^)\/\//,"");return r[o]=e,r}async function Zi({tokens:e,authConfig:t,identityIdStore:r}){r.setAuthConfig({Cognito:t});let o=await r.loadIdentityId();if(o)return o.id;let n=e?.idToken?hr(e.idToken.toString()):{},i=await _c(n,t);return r.storeIdentityId({id:i,type:e?"primary":"guest"}),i}async function _c(e,t){let r=t?.identityPoolId,o=it(r),n=Qr({endpointResolver:ut({endpointOverride:t.identityPoolEndpoint})}),i;try{i=(await n({region:o},{IdentityPoolId:r,Logins:e})).IdentityId}catch(s){throw fe(s),new p(s)}if(!i)throw new p({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}var yr=new h("CognitoCredentialsProvider"),es=50*60*1e3,ke=class{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){yr.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){yr.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){let r=t.authenticated,{tokens:o}=t,{authConfig:n}=t;try{Ee(n?.Cognito)}catch{return}if(!r&&!n.Cognito.allowGuestAccess)return;let{forceRefresh:i}=t,s=this.hasTokenChanged(o),a=await Zi({tokens:o,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return(i||s)&&this.clearCredentials(),r?(_i(o),this.credsForOIDCTokens(n.Cognito,o,a)):this.getGuestCredentials(a,n.Cognito)}async getGuestCredentials(t,r){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return yr.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let o=it(r.identityPoolId),n=Ft({endpointResolver:ut({endpointOverride:r.identityPoolEndpoint})}),i;try{i=await n({region:o},{IdentityId:t})}catch(s){throw fe(s),new p(s)}if(i?.Credentials?.AccessKeyId&&i?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+es;let s={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t};return i.IdentityId&&(s.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...s,isAuthenticatedCreds:!1},s}else throw new p({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,r,o){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return yr.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let n=r.idToken?hr(r.idToken.toString()):{},i=it(t.identityPoolId),s=Ft({endpointResolver:ut({endpointOverride:t.identityPoolEndpoint})}),a;try{a=await s({region:i},{IdentityId:o,Logins:n})}catch(c){throw fe(c),new p(c)}if(a?.Credentials?.AccessKeyId&&a?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+es;let c={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:o};return a.IdentityId&&(c.identityId=a.IdentityId,this._identityIdStore.storeIdentityId({id:a.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...c,isAuthenticatedCreds:!0,associatedIdToken:r.idToken?.toString()},c}else throw new p({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){return!!t&&!!this._credentialsAndIdentityId?.associatedIdToken&&t.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}};var go=new ke(new Ne($));var Sr={configure(e,t){let r=Be(e),o=new ot({sameSite:"lax"}),n=t?.ssr?o:$,i=t?.ssr?new ke(new Ne(o)):go;if(!r.Auth){g.configure(r,t);return}if(t?.Auth){g.configure(r,t);return}if(!g.libraryOptions.Auth){Ue.setAuthConfig(r.Auth),Ue.setKeyValueStorage(n),g.configure(r,{...t,Auth:{tokenProvider:Ue,credentialsProvider:i}});return}if(t){let s=g.libraryOptions.Auth;t.ssr!==void 0&&(Ue.setKeyValueStorage(n),s.credentialsProvider=i),g.configure(r,{Auth:s,...t});return}g.configure(r)},getConfig(){return g.getConfig()}};import{createReduxStore as Uc,register as Nc,select as kc,dispatch as cs,subscribe as Mc}from"@wordpress/data";var Ar="gatey_account",Tc="gatey";var Er=e=>{e?.username?window.localStorage.setItem(Ar,JSON.stringify(e)):window.localStorage.removeItem(Ar)},Me=async e=>{let t=JSON.parse(window.localStorage.getItem(Ar)??"{}"),r=!1;if(t?.username)try{let o=await V();o?.tokens?.accessToken?.payload?.exp&&o.tokens.accessToken.payload.exp>new Date().getTime()/1e3&&(r=!0)}catch{}else try{t=await fs(!1),t?.username&&(Er(t),t.loaded=!0,r=!0)}catch(o){console.error(o)}return!r&&t?.username&&(Er({}),Gatey.cognito.store.then(async o=>{await yo(e?.signOutHook),await cs(o).clearAccount(),window.location.assign("")})),t},Dc=async e=>{let t=window.location.hostname.toLowerCase().split(":")[0],r=t.toLowerCase()===e?.secondaryDomain?.toLowerCase().trim()&&Gatey.settings?.userPoolConfigurations.secondary?.Auth?.Cognito?.userPoolId?Gatey.settings?.userPoolConfigurations.secondary:Gatey.settings?.userPoolConfigurations.default,o={Auth:{Cognito:{userPoolClientId:"",userPoolId:"",identityPoolId:"",...r.Auth?.Cognito,loginWith:{oauth:{domain:"",scopes:[],responseType:"code",...r.Auth?.Cognito?.loginWith?.oauth,redirectSignIn:[window.location.origin+Gatey?.settings?.signInPage],redirectSignOut:[window.location.origin+Gatey?.settings?.signInPage]}}}},API:{...r.API,REST:{...r.API?.REST,admin:{endpoint:Gatey.restUrl}}}},n=t.toLowerCase()===e?.secondaryDomain?.toLowerCase().trim()&&e.apiConfigurations?.secondary?.apis?.length?e.apiConfigurations.secondary:e?.apiConfigurations?.default;n?.apis?.forEach(s=>{let a=o.API?.REST;a&&(a[s.name]={endpoint:s.endpoint,region:s.region})}),ho(o,{API:{REST:{headers:async s=>{let a=n?.apis?.find(c=>c.name===s.apiName);if(s.apiName==="admin"||a?.authorization==="ID_TOKEN"||a?.authorization==="ACCESS_TOKEN")try{let c=await De();if(c?.tokens?.idToken&&c?.tokens?.accessToken)return{Authorization:`Bearer ${s.apiName==="admin"||a?.authorization==="ID_TOKEN"?c.tokens.idToken.toString():c.tokens.accessToken.toString()}`}}catch(c){console.error(c),Gatey.cognito.store.then(u=>{cs(u).clearAccount()})}return{}}}}})},Fc=async()=>{let t=await(await Promise.resolve().then(()=>(as(),ss))).getConfigFromStorage();Dc(t);let o=window.location.hostname.toLowerCase().split(":")[0]===t?.secondaryDomain?.toLowerCase().trim()&&t.apiConfigurations?.secondary?.apis?.length?t.apiConfigurations.secondary:t?.apiConfigurations?.default,n=await Me(o);return{config:t,amplifyConfig:{},account:n,signedIn:!!n?.username&&!n.loaded,nextUrl:void 0,reloadAuthSession:0,reloadUserAttributes:0,reloadMFAPreferences:0}},Lc={setAmplifyConfig(e){return{type:"SET_AMPLIFY_CONFIG",amplifyConfig:e}},setAccount(e){return{type:"SET_ACCOUNT",account:e}},clearAccount(){return{type:"CLEAR_ACCOUNT"}},setSignedIn(e){return{type:"SET_SIGNED_IN",signedIn:e}},setNextUrl(e){return{type:"SET_NEXT_URL",nextUrl:e}},reloadAuthSession(){return{type:"RELOAD_AUTH_SESSION"}},reloadUserAttributes(){return{type:"RELOAD_USER_ATTRIBUTES"}},reloadMFAPreferences(){return{type:"RELOAD_MFA_PREFERENCE"}}},Kc={getAmplifyConfig(e){return e.amplifyConfig},getAccount(e){return e.account},getNextUrl(e){return e.nextUrl},isSignedIn(e){return e.signedIn},getConfig(e){return e.config},getState(e){return e}},Gc={},us=async()=>{let e=await Fc(),t=Uc("wpsuite/gatey",{reducer(r=e,o){switch(o.type){case"SET_AMPLIFY_CONFIG":return{...r,amplifyConfig:o.amplifyConfig};case"SET_ACCOUNT":return Er(o.account),{...r,account:o.account};case"CLEAR_ACCOUNT":return Er({}),{...r,account:{}};case"RELOAD_AUTH_SESSION":{let n=Math.random();return{...r,reloadAuthSession:r.reloadAuthSession!==n?n:n+1}}case"RELOAD_USER_ATTRIBUTES":{let n=Math.random();return{...r,reloadUserAttributes:r.reloadUserAttributes!==n?n:n+1}}case"RELOAD_MFA_PREFERENCE":{let n=Math.random();return{...r,reloadMFAPreferences:r.reloadMFAPreferences!==n?n:n+1}}case"SET_SIGNED_IN":return{...r,signedIn:o.signedIn};case"SET_NEXT_URL":return{...r,nextUrl:o.nextUrl}}return r},actions:Lc,selectors:Kc,resolvers:Gc});return Nc(t),t},wr=(e,t,r)=>{let o;function n(){let s=kc(e).getState(),a=t(s);if(a!==o){let c=o;o=a,r(o,c)}}let i=Mc(n,e);return n(),i};var So=()=>Sr.getConfig(),ho=(e,t)=>{Sr.configure(e,t)},De=e=>V(e),ds=()=>mo(),ps=()=>po(),fs=async(e=!0)=>{let t=e?await Me():{};if(t?.username)return t;try{if((await V()).tokens)return{username:(await st()).username,userAttributes:await ds(),mfaPreferences:await ps()}}catch{try{await gr()}catch{}}return{}},ls=async()=>{await fo({totp:"DISABLED"})},ms=()=>Me().then(e=>e?.username),gs=()=>Me().then(e=>e?.userAttributes),hs=()=>Me().then(e=>e?.mfaPreferences),ys=()=>Me().then(e=>!!e?.username),Ss=e=>Ao().then(t=>t?.includes(e)||!1),Ao=()=>De().then(e=>e.tokens?.idToken?.payload["cognito:groups"]instanceof Array?e.tokens.idToken.payload["cognito:groups"].map(t=>t):[]).catch(e=>{console.error(e)}),As=async()=>De().then(e=>e.tokens?.idToken?.payload["cognito:roles"]instanceof Array?e.tokens.idToken.payload["cognito:roles"].map(t=>t).map(t=>t.substring(t.indexOf("/")+1)):[]).catch(e=>{console.error(e)}),Is=async()=>De().then(e=>{if(!e.tokens?.idToken?.payload["cognito:preferred_role"])return;let t=e.tokens.idToken.payload["cognito:preferred_role"];return t.substring(t.indexOf("/")+1)}).catch(e=>{console.error(e)}),Es=()=>De().then(e=>e.tokens?.accessToken.payload.scope?.split(" ")??[]).catch(e=>{console.error(e)}),Hc=async e=>{let t;return Gatey.settings.integrateWpLogin&&Gatey.restUrl?.startsWith("http")&&(t=await Gatey.cognito.post({apiName:"admin",path:"/login"}).response.then(o=>o.body.json()).then(o=>{if(o instanceof Object&&"redirect"in o)return o?.redirect}).catch(o=>{console.error(o)})),e&&await Gatey.cognito.get({apiName:e.apiName,path:e.path,options:e.options}).response.catch(r=>console.error(r)),Gatey.settings.redirectSignIn??t},yo=async e=>{let t;Gatey.settings.integrateWpLogin&&(t=await Gatey.cognito.get({apiName:"admin",path:"/logout"}).response.then(r=>r.body.json()).then(r=>{if(r instanceof Object&&"redirect"in r)return r?.redirect}).catch(r=>{console.error(r)})),e&&await Gatey.cognito.get({apiName:e.apiName,path:e.path,options:e.options}).response.catch(r=>console.error(r));try{await gr()}catch{}return Gatey.settings.redirectSignOut??t};Ir();var Wc=()=>{Gatey.cognito.store.then(e=>{wr(e,t=>t.nextUrl,async t=>{t&&window.location.assign(t)}),Vc(e).clearAccount()})};var ws=!!Gatey.cognito?.store,$c=Gatey.cognito?.store??us();ws||(Gatey.cognito={store:$c,observeStore:wr,getAmplifyConfig:So,isAuthenticated:ys,isInGroup:Ss,getUsername:ms,getUserAttributes:gs,getMfaPreferences:hs,clearMfaPreferences:ls,getGroups:Ao,getRoles:As,getPreferredRole:Is,getScopes:Es,signOut:Wc,get:Zt,post:er,put:tr,del:rr,head:or,patch:nr});ws=!0;export{Tc as TEXT_DOMAIN,ls as clearMfaPreferences,ho as configureAmplify,bc as decryptData,dt as deobfuscate,So as getAmplifyConfig,Ao as getGroups,hs as getMfaPreferences,Is as getPreferredRole,As as getRoles,Es as getScopes,gs as getUserAttributes,ys as isAuthenticated,Ss as isInGroup,De as loadAuthSession,ps as loadMFAPreferences,ds as loadUserAttributes,Hc as login,yo as logout,wr as observeStore,$c as store};
