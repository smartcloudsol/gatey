"use strict";(globalThis.webpackChunk_smart_cloud_gatey_admin=globalThis.webpackChunk_smart_cloud_gatey_admin||[]).push([[67],{12067:(e,o,s)=>{s.r(o),s.d(o,{default:()=>I});var r=s(94285),a=s(69019),i=s(4034),t=s(74533),n=s(64999),c=s(5055),l=s(48953),d=s(48324),u=s(17826),g=s(69329),p=s(9543),f=s(27723),y=s(70544),b=s(57693),m=s(7641),h=s(20899),v=s(22342),x=s(30988),j=s(51609),k=s(69439),P=s(43226),z=s(10790);const _=k.Ik({socialProviders:k.Ik({google:k.zM(),facebook:k.zM(),apple:k.zM(),amazon:k.zM()})}),A={socialProviders:{google:!1,facebook:!1,apple:!1,amazon:!1}};function I({amplifyConfigured:e,config:o,accountId:s,siteId:k,siteKey:I,onSave:S}){const[E,w]=(0,j.useState)(!1),[M,T]=(0,j.useState)(!1),C=(0,g.m)({mode:"uncontrolled",initialValues:{...A},validate:(0,x.u)(_)}),D=(0,j.useCallback)((async e=>{if(s&&k&&I){T(!0);try{const a=[];e.socialProviders&&Object.entries(e.socialProviders).forEach((([e,o])=>{!o||"google"!==e&&"facebook"!==e&&"apple"!==e&&"amazon"!==e||a.push(e)}));const i={...o,socialProviders:a};delete i.secondaryDomain,delete i.subscriptionType;const t=await async function(e,o,s,a){const i=(0,r.yJ)({apiName:"backend",path:`/account/${e}/site/${o}/settings`,options:{body:{settings:a},headers:{"X-Site-Key":s}}}),t=await i.response;if(t.statusCode<200||t.statusCode>=300)throw new Error(t.body.toString());return(await t.body.json()).settings}(s,k,I,i);S(t),p.$e.show({title:(0,f.__)("Settings saved",y.TEXT_DOMAIN),message:(0,f.__)("Form field settings saved successfully",y.TEXT_DOMAIN),color:"green",icon:(0,z.jsx)(b.A,{}),className:P.A.notification})}catch(e){console.error("Error saving form field settings:",e),p.$e.show({title:(0,f.__)("Error occured",y.TEXT_DOMAIN),message:e.message,color:"red",icon:(0,z.jsx)(m.A,{}),className:P.A.notification})}finally{T(!1)}}else console.error("Missing account ID or site ID or site key")}),[s,k,I,o,S]);return(0,j.useEffect)((()=>{if(!E&&o){const e={socialProviders:{google:!1,facebook:!1,apple:!1,amazon:!1}};Array.isArray(o.socialProviders)&&o.socialProviders.forEach((o=>{"google"!==o&&"facebook"!==o&&"apple"!==o&&"amazon"!==o||(e.socialProviders[o]=!0)})),C.setValues(e),w(!0)}}),[o,C,E]),(0,j.useEffect)((()=>{o&&w(!1)}),[o]),(0,z.jsxs)("form",{onSubmit:C.onSubmit(D),children:[(0,z.jsx)(a.B,{mb:"lg",children:(0,z.jsxs)(i.L,{legend:"",children:[(0,z.jsx)(t.S,{label:"Google",...C.getInputProps("socialProviders.google",{type:"checkbox"})},C.key("socialProviders.google")),(0,z.jsx)(t.S,{label:"Facebook",...C.getInputProps("socialProviders.facebook",{type:"checkbox"})},C.key("socialProviders.facebook")),(0,z.jsx)(t.S,{label:"Apple",...C.getInputProps("socialProviders.apple",{type:"checkbox"})},C.key("socialProviders.apple")),(0,z.jsx)(t.S,{label:"Amazon",...C.getInputProps("socialProviders.amazon",{type:"checkbox"})},C.key("socialProviders.amazon"))]})}),(0,z.jsxs)(n.Y,{justify:"flex-end",mt:"xl",children:[(0,z.jsx)(c.$,{type:"submit",variant:"gradient",loading:M,leftSection:(0,z.jsx)(h.A,{size:16}),disabled:!e,children:"Save Social Providers Configuration"}),!e&&(0,z.jsxs)(l.j,{children:[(0,z.jsx)(l.j.Target,{children:(0,z.jsx)(d.M,{variant:"subtle",size:"xs",children:(0,z.jsx)(v.A,{size:16,color:"red"})})}),(0,z.jsx)(l.j.Dropdown,{maw:300,style:{zIndex:1e4},children:(0,z.jsxs)(u.E,{size:"sm",children:[(0,z.jsx)("strong",{children:"Heads-up"}),": Configuration is temporarily unavailable. Please try again later â€” no action is needed on your side."]})})]})]})]})}},22342:(e,o,s)=>{s.d(o,{A:()=>r});var r=(0,s(38728).A)("outline","octagon","IconOctagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}]])},30988:(e,o,s)=>{function r(e,o){return s=>{const r=e.safeParse(s);if(r.success)return{};const a={};return"error"in r&&("first"===o?.errorPriority&&r.error.errors.reverse(),r.error.errors.forEach((e=>{a[e.path.join(".")]=e.message}))),a}}s.d(o,{u:()=>r})}}]);