"use strict";(globalThis.webpackChunk_smart_cloud_gatey_admin=globalThis.webpackChunk_smart_cloud_gatey_admin||[]).push([[67],{12067:(e,o,s)=>{s.r(o),s.d(o,{default:()=>S});var r=s(94285),a=s(69019),i=s(4034),t=s(74533),c=s(57193),l=s(64999),n=s(5055),d=s(48953),u=s(48324),m=s(17826),g=s(69329),p=s(9543),v=s(27723),f=s(70544),P=s(57693),b=s(7641),y=s(20899),h=s(22342),x=s(30988),k=s(51609),j=s(69439),I=s(43226),z=s(10790);const N=j.Ik({socialProviders:j.Ik({google:j.zM(),facebook:j.zM(),apple:j.zM(),amazon:j.zM(),custom:j.zM()}),customProviderName:j.Yj().refine((e=>e&&e.trim().length>0),{message:"Custom provider name is required when custom provider is enabled"})}),A={socialProviders:{google:!1,facebook:!1,apple:!1,amazon:!1,custom:!1},customProviderName:""};function S({amplifyConfigured:e,config:o,accountId:s,siteId:j,siteKey:S,onSave:_,InfoLabelComponent:w}){const[C,E]=(0,k.useState)(!1),[M,T]=(0,k.useState)(!1),D=(0,g.m)({mode:"uncontrolled",initialValues:{...A},validate:(0,x.u)(N)}),O=(0,k.useCallback)((async e=>{if(s&&j&&S){T(!0);try{const a=[];e.socialProviders&&Object.entries(e.socialProviders).forEach((([e,o])=>{!o||"google"!==e&&"facebook"!==e&&"apple"!==e&&"amazon"!==e&&"custom"!==e||a.push(e)}));const i={...o,socialProviders:a,customProviderName:e.customProviderName};delete i.secondaryDomain,delete i.subscriptionType;const t=await async function(e,o,s,a){const i=(0,r.yJ)({apiName:"backend",path:`/account/${e}/site/${o}/settings`,options:{body:{settings:a},headers:{"X-Site-Key":s}}}),t=await i.response;if(t.statusCode<200||t.statusCode>=300)throw new Error(t.body.toString());return(await t.body.json()).settings}(s,j,S,i);_(t),p.$e.show({title:(0,v.__)("Settings saved",f.TEXT_DOMAIN),message:(0,v.__)("Form field settings saved successfully",f.TEXT_DOMAIN),color:"green",icon:(0,z.jsx)(P.A,{}),className:I.A.notification})}catch(e){console.error("Error saving form field settings:",e),p.$e.show({title:(0,v.__)("Error occured",f.TEXT_DOMAIN),message:e.message,color:"red",icon:(0,z.jsx)(b.A,{}),className:I.A.notification})}finally{T(!1)}}else console.error("Missing account ID or site ID or site key")}),[s,j,S,o,_]);return(0,k.useEffect)((()=>{if(!C&&o){const e={socialProviders:{google:!1,facebook:!1,apple:!1,amazon:!1,custom:!1},customProviderName:""};Array.isArray(o.socialProviders)&&o.socialProviders.forEach((o=>{"google"!==o&&"facebook"!==o&&"apple"!==o&&"amazon"!==o&&"custom"!==o||(e.socialProviders[o]=!0)})),o.customProviderName&&(e.customProviderName=o.customProviderName),D.setValues(e),E(!0)}}),[o,D,C]),(0,k.useEffect)((()=>{o&&E(!1)}),[o]),(0,z.jsxs)("form",{onSubmit:D.onSubmit(O),children:[(0,z.jsxs)(a.B,{mb:"lg",children:[(0,z.jsxs)(i.L,{legend:"Social Providers",fw:500,children:[(0,z.jsx)(t.S,{label:"Google",...D.getInputProps("socialProviders.google",{type:"checkbox"})},D.key("socialProviders.google")),(0,z.jsx)(t.S,{label:"Facebook",...D.getInputProps("socialProviders.facebook",{type:"checkbox"})},D.key("socialProviders.facebook")),(0,z.jsx)(t.S,{label:"Apple",...D.getInputProps("socialProviders.apple",{type:"checkbox"})},D.key("socialProviders.apple")),(0,z.jsx)(t.S,{label:"Amazon",...D.getInputProps("socialProviders.amazon",{type:"checkbox"})},D.key("socialProviders.amazon")),(0,z.jsx)(t.S,{label:"Custom",...D.getInputProps("socialProviders.custom",{type:"checkbox"})},D.key("socialProviders.custom"))]}),D.getValues().socialProviders.custom&&(0,z.jsx)(c.k,{classNames:{label:I.A["form-field-label"]},label:(0,z.jsx)(w,{text:"Custom Identity Provider Name",scrollToId:"custom-provider-name"}),withAsterisk:!0,...D.getInputProps("customProviderName")},D.key("customProviderName"))]}),(0,z.jsxs)(l.Y,{justify:"flex-end",mt:"xl",children:[(0,z.jsx)(n.$,{type:"submit",variant:"gradient",loading:M,leftSection:(0,z.jsx)(y.A,{size:16}),disabled:!e,children:"Save Social Providers Configuration"}),!e&&(0,z.jsxs)(d.j,{children:[(0,z.jsx)(d.j.Target,{children:(0,z.jsx)(u.M,{variant:"subtle",size:"xs",children:(0,z.jsx)(h.A,{size:16,color:"red"})})}),(0,z.jsx)(d.j.Dropdown,{maw:300,style:{zIndex:1e4},children:(0,z.jsxs)(m.E,{size:"sm",children:[(0,z.jsx)("strong",{children:"Heads-up"}),": Configuration is temporarily unavailable. Please try again later â€” no action is needed on your side."]})})]})]})]})}},22342:(e,o,s)=>{s.d(o,{A:()=>r});var r=(0,s(38728).A)("outline","octagon","IconOctagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}]])},30988:(e,o,s)=>{function r(e,o){return s=>{const r=e.safeParse(s);if(r.success)return{};const a={};return"error"in r&&("first"===o?.errorPriority&&r.error.errors.reverse(),r.error.errors.forEach((e=>{a[e.path.join(".")]=e.message}))),a}}s.d(o,{u:()=>r})}}]);