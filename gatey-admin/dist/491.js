"use strict";(globalThis.webpackChunk_smart_cloud_gatey_admin=globalThis.webpackChunk_smart_cloud_gatey_admin||[]).push([[491],{15491:(e,s,r)=>{r.r(s),r.d(s,{default:()=>z});var o=r(94285),i=r(69019),t=r(31179),n=r(17826),a=r(40054),c=r(57193),d=r(5055),l=r(64999),u=r(82287),m=r(48324),v=r(69329),g=r(9543),p=r(45727),x=r(27723),h=r(70544),f=r(57693),j=r(7641),y=r(4225),P=r(42449),b=r(20899),k=r(22342),_=r(30988),I=r(51609),A=r(69439),T=r(43226),w=r(10790);const $=A.Ik({customProviders:A.YO(A.Ik({providerName:A.Yj().refine((e=>e&&e.trim().length>0),{message:"Custom provider name is required"}),providerTitle:A.Yj().optional(),icon:A.Yj().optional()}))}),S={customProviders:[]};function z({amplifyConfigured:e,config:s,accountId:r,siteId:A,siteKey:z,onSave:C}){const[E,N]=(0,I.useState)(!1),[D,M]=(0,I.useState)(!1),O=(0,v.m)({mode:"uncontrolled",initialValues:{...S},validate:(0,_.u)($)}),Y=(0,I.useCallback)((async e=>{if(r&&A&&z){M(!0);try{const i={...s,customProviders:e.customProviders};delete i.secondaryDomain,delete i.subscriptionType;const t=await async function(e,s,r,i){const t=(0,o.yJ)({apiName:"backend",path:`/account/${e}/site/${s}/settings`,options:{body:{settings:i},headers:{"X-Site-Key":r}}}),n=await t.response;if(n.statusCode<200||n.statusCode>=300)throw new Error(n.body.toString());return(await n.body.json()).settings}(r,A,z,i);C(t),g.$e.show({title:(0,x.__)("Settings saved",h.TEXT_DOMAIN),message:(0,x.__)("Form field settings saved successfully",h.TEXT_DOMAIN),color:"green",icon:(0,w.jsx)(f.A,{}),className:T.A.notification})}catch(e){console.error("Error saving form field settings:",e),g.$e.show({title:(0,x.__)("Error occured",h.TEXT_DOMAIN),message:e.message,color:"red",icon:(0,w.jsx)(j.A,{}),className:T.A.notification})}finally{M(!1)}}else console.error("Missing account ID or site ID or site key")}),[r,A,z,s,C]);return(0,I.useEffect)((()=>{if(!E&&s){const e={customProviders:[]};s.customProviders&&(e.customProviders=s.customProviders),O.setValues(e),N(!0)}}),[s,O,E]),(0,I.useEffect)((()=>{s&&N(!1)}),[s]),(0,w.jsxs)("form",{onSubmit:O.onSubmit(Y),children:[(0,w.jsx)(i.B,{mb:"lg",children:(0,w.jsxs)(t.Z,{withBorder:!0,m:"xs",p:"xs",w:"100%",h:"100%",children:[(0,w.jsx)(t.Z.Section,{p:"md",children:(0,w.jsx)(n.E,{c:"dimmed",size:"xs",children:"Add custom providers. Each custom provider must have a name."})}),O.getValues().customProviders?.map(((e,s)=>(0,w.jsxs)(a.s,{direction:"row",gap:"xs",align:"center",children:[(0,w.jsx)(c.k,{label:"Provider Name",...O.getInputProps(`customProviders.${s}.providerName`)},O.key(`customProviders.${s}.providerName`)),(0,w.jsx)(c.k,{label:"Provider Title",...O.getInputProps(`customProviders.${s}.providerTitle`)},O.key(`customProviders.${s}.providerTitle`)),(0,w.jsx)(c.k,{label:"Icon (in base64 format)",...O.getInputProps(`customProviders.${s}.icon`)},O.key(`customProviders.${s}.icon`)),(0,w.jsx)(d.$,{variant:"subtle",size:"xs",mt:"0.3rem",onClick:()=>O.removeListItem("customProviders",s),children:(0,w.jsx)(y.A,{size:14,color:"red"})})]},O.key(`customProviders.${s}`)))),(0,w.jsx)(d.$,{variant:"subtle",mt:"xs",size:"xs",leftSection:(0,w.jsx)(P.A,{size:14}),onClick:()=>{O.insertListItem("customProviders",{id:(0,p.z)(),providerName:"",providerTitle:"",icon:""})},children:"Add Custom Provider"})]})}),(0,w.jsxs)(l.Y,{justify:"flex-end",mt:"xl",children:[(0,w.jsx)(d.$,{type:"submit",variant:"gradient",loading:D,leftSection:(0,w.jsx)(b.A,{size:16}),disabled:!e,children:"Save Social Providers Configuration"}),!e&&(0,w.jsxs)(u.j,{children:[(0,w.jsx)(u.j.Target,{children:(0,w.jsx)(m.M,{variant:"subtle",size:"xs",children:(0,w.jsx)(k.A,{size:16,color:"red"})})}),(0,w.jsx)(u.j.Dropdown,{maw:300,style:{zIndex:1e4},children:(0,w.jsxs)(n.E,{size:"sm",children:[(0,w.jsx)("strong",{children:"Heads-up"}),": Configuration is temporarily unavailable. Please try again later â€” no action is needed on your side."]})})]})]})]})}},22342:(e,s,r)=>{r.d(s,{A:()=>o});const o=(0,r(38728).A)("outline","octagon","Octagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}]])},30988:(e,s,r)=>{function o(e,s){return r=>{const o=e.safeParse(r);if(o.success)return{};const i={};return"error"in o&&("first"===s?.errorPriority&&o.error.errors.reverse(),o.error.errors.forEach((e=>{i[e.path.join(".")]=e.message}))),i}}r.d(s,{u:()=>o})}}]);