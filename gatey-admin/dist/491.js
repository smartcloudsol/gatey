"use strict";(globalThis.webpackChunk_smart_cloud_gatey_admin=globalThis.webpackChunk_smart_cloud_gatey_admin||[]).push([[491],{15491(e,s,t){t.r(s),t.d(s,{default:()=>$});var i=t(6252),r=t(48324),o=t(64999),a=t(40054),n=t(5055),c=t(31179),l=t(14598),d=t(69019),m=t(17826),u=t(57193),p=t(69329),y=t(9543),v=t(45727),g=t(27723),x=t(70544),j=t(7641),f=t(20899),h=t(57693),P=t(22342),b=t(42449),w=t(4225),k=t(30988),I=t(51609),_=t(8354),N=t(43226),A=t(10790);const S=_.Ikc({customProviders:_.YOg(_.Ikc({id:_.YjP(),providerName:_.YjP().refine(e=>e&&e.trim().length>0,{message:"Custom provider name is required"}),providerTitle:_.YjP().optional(),icon:_.YjP().optional()}))}),T={customProviders:[]};function $({amplifyConfigured:e,config:s,accountId:t,siteId:_,siteKey:$,onSave:C}){const[z,E]=(0,I.useState)(!1),[G,D]=(0,I.useState)(!1),Y=(0,p.m)({mode:"uncontrolled",initialValues:{...T},validate:(0,k.s)(S)}),M=(0,I.useCallback)(async e=>{if(t&&_&&$){D(!0);try{const r={...s,customProviders:e.customProviders};delete r.subscriptionType;const o=await async function(e,s,t,r){const o=(0,i.yJ)({apiName:"backend",path:`/account/${e}/site/${s}/settings`,options:{body:{settings:r},headers:{"X-Site-Key":t}}}),a=await o.response;if(a.statusCode<200||a.statusCode>=300)throw new Error(a.body.toString());return(await a.body.json()).settings}(t,_,$,r);C(o),y.$e.show({title:(0,g.__)("Settings saved",x.TEXT_DOMAIN),message:(0,g.__)("Form field settings saved successfully",x.TEXT_DOMAIN),color:"green",icon:(0,A.jsx)(h.A,{}),className:N.A.notification})}catch(e){console.error("Error saving form field settings:",e),y.$e.show({title:(0,g.__)("Error occured",x.TEXT_DOMAIN),message:e.message,color:"red",icon:(0,A.jsx)(j.A,{}),className:N.A.notification})}finally{D(!1)}}else console.error("Missing account ID or site ID or site key")},[t,_,$,s,C]);return(0,I.useEffect)(()=>{if(!z&&s){const e={customProviders:[]};s.customProviders&&(e.customProviders=s.customProviders),Y.setValues(e),E(!0)}},[s,Y,z]),(0,I.useEffect)(()=>{s&&E(!1)},[s]),(0,A.jsxs)("form",{onSubmit:Y.onSubmit(M),children:[(0,A.jsx)(d.B,{mb:"lg",children:(0,A.jsxs)(c.Z,{withBorder:!0,m:"xs",p:"xs",w:"100%",h:"100%",children:[(0,A.jsx)(c.Z.Section,{p:"md",children:(0,A.jsx)(m.E,{c:"dimmed",size:"xs",children:"Add custom providers. Each custom provider must have a name."})}),Y.getValues().customProviders?.map((e,s)=>(0,A.jsxs)(a.s,{direction:"row",gap:"xs",align:"center",children:[(0,A.jsx)(u.k,{label:"Provider Name",...Y.getInputProps(`customProviders.${s}.providerName`)},Y.key(`customProviders.${s}.providerName`)),(0,A.jsx)(u.k,{label:"Provider Title",...Y.getInputProps(`customProviders.${s}.providerTitle`)},Y.key(`customProviders.${s}.providerTitle`)),(0,A.jsx)(u.k,{label:"Icon (in base64 format)",...Y.getInputProps(`customProviders.${s}.icon`)},Y.key(`customProviders.${s}.icon`)),(0,A.jsx)(n.$,{variant:"subtle",size:"xs",mt:"0.3rem",onClick:()=>Y.removeListItem("customProviders",s),children:(0,A.jsx)(w.A,{size:14,color:"red"})})]},Y.key(`customProviders.${s}`))),(0,A.jsx)(n.$,{variant:"subtle",mt:"xs",size:"xs",leftSection:(0,A.jsx)(b.A,{size:14}),onClick:()=>{Y.insertListItem("customProviders",{id:(0,v.z)(),providerName:"",providerTitle:"",icon:""})},children:"Add Custom Provider"})]})}),(0,A.jsxs)(o.Y,{justify:"flex-end",mt:"xl",children:[(0,A.jsx)(n.$,{type:"submit",variant:"gradient",loading:G,leftSection:(0,A.jsx)(f.A,{size:16}),disabled:!e,children:"Save Social Providers Configuration"}),!e&&(0,A.jsxs)(l.j,{children:[(0,A.jsx)(l.j.Target,{children:(0,A.jsx)(r.M,{variant:"subtle",size:"xs",children:(0,A.jsx)(P.A,{size:16,color:"red"})})}),(0,A.jsx)(l.j.Dropdown,{maw:300,style:{zIndex:1e4},children:(0,A.jsxs)(m.E,{size:"sm",children:[(0,A.jsx)("strong",{children:"Heads-up"}),": Configuration is temporarily unavailable. Please try again later â€” no action is needed on your side."]})})]})]})]})}},22342(e,s,t){t.d(s,{A:()=>i});const i=(0,t(38728).A)("outline","octagon","Octagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}]])},40054(e,s,t){t.d(s,{s:()=>v});var i=t(10790),r=t(77602),o=(t(51609),t(1101)),a=t(46100),n=t(52837),c=t(15074),l=t(155),d=t(83974),m=t(11507),u=t(18639);const p={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var y={root:"m_8bffd616"};const v=(0,u.v)((e,s)=>{const t=(0,a.Y)("Flex",null,e),{classNames:u,className:v,style:g,styles:x,unstyled:j,vars:f,gap:h,rowGap:P,columnGap:b,align:w,justify:k,wrap:I,direction:_,attributes:N,...A}=t,S=(0,n.I)({name:"Flex",classes:y,props:t,className:v,style:g,classNames:u,styles:x,unstyled:j,attributes:N,vars:f}),T=(0,o.xd)(),$=(0,d.C)(),C=(0,l.X)({styleProps:{gap:h,rowGap:P,columnGap:b,align:w,justify:k,wrap:I,direction:_},theme:T,data:p});return(0,i.jsxs)(i.Fragment,{children:[C.hasResponsiveStyles&&(0,i.jsx)(c.K,{selector:`.${$}`,styles:C.styles,media:C.media}),(0,i.jsx)(m.a,{ref:s,...S("root",{className:$,style:(0,r.J)(C.inlineStyles)}),...A})]})});v.classes=y,v.displayName="@mantine/core/Flex"}}]);