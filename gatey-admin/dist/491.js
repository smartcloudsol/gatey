"use strict";(globalThis.webpackChunk_smart_cloud_gatey_admin=globalThis.webpackChunk_smart_cloud_gatey_admin||[]).push([[491],{2342(e,s,o){o.d(s,{A:()=>t});const t=(0,o(8728).A)("outline","octagon","Octagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0",key:"svg-0"}]])},5491(e,s,o){o.r(s),o.d(s,{default:()=>P});var t=o(6252),i=o(8790),r=o(7723),n=o(1529),a=o(7641),c=o(899),d=o(7693),l=o(2342),u=o(2449),m=o(4225),v=o(988),g=o(1609),p=o(8354),x=o(3226),h=o(790);const f=p.Ikc({customProviders:p.YOg(p.Ikc({id:p.YjP(),providerName:p.YjP().refine(e=>e&&e.trim().length>0,{message:"Custom provider name is required"}),providerTitle:p.YjP().optional(),icon:p.YjP().optional()}))}),j={customProviders:[]};function P({amplifyConfigured:e,config:s,accountId:o,siteId:p,siteKey:P,onSave:y}){const[b,I]=(0,g.useState)(!1),[k,C]=(0,g.useState)(!1),w=(0,i.useForm)({mode:"uncontrolled",initialValues:{...j},validate:(0,v.s)(f)}),S=(0,g.useCallback)(async e=>{if(o&&p&&P){C(!0);try{const a={...s,customProviders:e.customProviders};delete a.subscriptionType;const c=await async function(e,s,o,i){const r=(0,t.yJ)({apiName:"backend",path:`/account/${e}/site/${s}/settings`,options:{body:{settings:i},headers:{"X-Site-Key":o,"X-Plugin":"gatey"}}}),n=await r.response;if(n.statusCode<200||n.statusCode>=300)throw new Error(n.body.toString());return(await n.body.json()).settings}(o,p,P,a);y(c),i.notifications.show({title:(0,r.__)("Settings saved",n.Xg),message:(0,r.__)("Form field settings saved successfully",n.Xg),color:"green",icon:(0,h.jsx)(d.A,{}),className:x.A.notification})}catch(e){console.error("Error saving form field settings:",e),i.notifications.show({title:(0,r.__)("Error occured",n.Xg),message:e.message,color:"red",icon:(0,h.jsx)(a.A,{}),className:x.A.notification})}finally{C(!1)}}else console.error("Missing account ID or site ID or site key")},[o,p,P,s,y]);return(0,g.useEffect)(()=>{if(!b&&s){const e={customProviders:[]};s.customProviders&&(e.customProviders=s.customProviders),w.setValues(e),I(!0)}},[s,w,b]),(0,g.useEffect)(()=>{s&&I(!1)},[s]),(0,h.jsxs)("form",{onSubmit:w.onSubmit(S),children:[(0,h.jsx)(i.Stack,{mb:"lg",children:(0,h.jsxs)(i.Card,{withBorder:!0,m:"xs",p:"xs",w:"100%",h:"100%",children:[(0,h.jsx)(i.Card.Section,{p:"md",children:(0,h.jsx)(i.Text,{c:"dimmed",size:"xs",children:"Add custom providers. Each custom provider must have a name."})}),w.getValues().customProviders?.map((e,s)=>(0,h.jsxs)(i.Flex,{direction:"row",gap:"xs",align:"center",children:[(0,h.jsx)(i.TextInput,{label:"Provider Name",...w.getInputProps(`customProviders.${s}.providerName`)},w.key(`customProviders.${s}.providerName`)),(0,h.jsx)(i.TextInput,{label:"Provider Title",...w.getInputProps(`customProviders.${s}.providerTitle`)},w.key(`customProviders.${s}.providerTitle`)),(0,h.jsx)(i.TextInput,{label:"Icon (in base64 format)",...w.getInputProps(`customProviders.${s}.icon`)},w.key(`customProviders.${s}.icon`)),(0,h.jsx)(i.Button,{variant:"subtle",size:"xs",mt:"0.3rem",onClick:()=>w.removeListItem("customProviders",s),children:(0,h.jsx)(m.A,{size:14,color:"red"})})]},w.key(`customProviders.${s}`))),(0,h.jsx)(i.Button,{variant:"subtle",mt:"xs",size:"xs",leftSection:(0,h.jsx)(u.A,{size:14}),onClick:()=>{w.insertListItem("customProviders",{id:(0,i.randomId)(),providerName:"",providerTitle:"",icon:""})},children:"Add Custom Provider"})]})}),(0,h.jsxs)(i.Group,{justify:"flex-end",mt:"xl",children:[(0,h.jsx)(i.Button,{type:"submit",variant:"gradient",loading:k,leftSection:(0,h.jsx)(c.A,{size:16}),disabled:!e,children:"Save Social Providers Configuration"}),!e&&(0,h.jsxs)(i.HoverCard,{children:[(0,h.jsx)(i.HoverCard.Target,{children:(0,h.jsx)(i.ActionIcon,{variant:"subtle",size:"xs",children:(0,h.jsx)(l.A,{size:16,color:"red"})})}),(0,h.jsx)(i.HoverCard.Dropdown,{maw:300,style:{zIndex:1e4},children:(0,h.jsxs)(i.Text,{size:"sm",children:[(0,h.jsx)("strong",{children:"Heads-up"}),": Configuration is temporarily unavailable. Please try again later â€” no action is needed on your side."]})})]})]})]})}}}]);